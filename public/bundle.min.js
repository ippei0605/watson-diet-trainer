!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.WatsonSpeech=t():r.WatsonSpeech=t()}(this,function(){var C=Math.LN2,D=Math.log,N=Math.abs,z=Math.round,s=Math.max,F=Math.floor,Y=Math.pow,a=String.fromCharCode,W=Math.min;return function(o){function a(t){if(e[t])return e[t].exports;var r=e[t]={i:t,l:!1,exports:{}};return o[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}var e={};return a.m=o,a.c=e,a.i=function(e){return e},a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},a.p="",a(a.s=40)}([function(n,y,e){"use strict";(function(r){function ee(){return re.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function te(r,t){if(ee()<t)throw new RangeError("Invalid typed array length");return re.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(t),r.__proto__=re.prototype):(null===r&&(r=new re(t)),r.length=t),r}function re(o,a,s){if(!(re.TYPED_ARRAY_SUPPORT||this instanceof re))return new re(o,a,s);if("number"==typeof o){if("string"==typeof a)throw new Error("If encoding is specified then the first argument must be a string");return i(this,o)}return n(this,o,a,s)}function n(o,t,a,r){if("number"==typeof t)throw new TypeError("\"value\" argument must not be a number");return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?l(o,t,a,r):"string"==typeof t?u(o,t,a):f(o,t)}function o(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be a number");if(0>e)throw new RangeError("\"size\" argument must not be negative")}function s(a,t,e,r){return o(t),0>=t?te(a,t):void 0===e?te(a,t):"string"==typeof r?te(a,t).fill(e,r):te(a,t).fill(e)}function i(n,t){if(o(t),n=te(n,0>t?0:0|p(t)),!re.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)n[e]=0;return n}function u(o,t,e){if("string"==typeof e&&""!==e||(e="utf8"),!re.isEncoding(e))throw new TypeError("\"encoding\" must be a valid string encoding");var a=0|d(t,e);o=te(o,a);var n=o.write(t,e);return n!==a&&(o=o.slice(0,n)),o}function c(o,t){var e=0>t.length?0:0|p(t.length);o=te(o,e);for(var r=0;r<e;r+=1)o[r]=255&t[r];return o}function l(o,t,e,r){if(t.byteLength,0>e||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),re.TYPED_ARRAY_SUPPORT?(o=t,o.__proto__=re.prototype):o=c(o,t),o}function f(n,t){if(re.isBuffer(t)){var e=0|p(t.length);return n=te(n,e),0===n.length?n:(t.copy(n,0,0,e),n)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||G(t.length)?te(n,0):c(n,t);if("Buffer"===t.type&&Z(t.data))return c(n,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=ee())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ee().toString(16)+" bytes");return 0|e}function d(o,a){if(re.isBuffer(o))return o.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(o)||o instanceof ArrayBuffer))return o.byteLength;"string"!=typeof o&&(o=""+o);var e=o.length;if(0===e)return 0;for(var r=!1;;)switch(a){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return oe(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return ae(o).length;default:if(r)return oe(o).length;a=(""+a).toLowerCase(),r=!0;}}function g(o,t,e){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),0>=e)return"";if(e>>>=0,t>>>=0,e<=t)return"";for(o||(o="utf8");;)switch(o){case"hex":return B(this,t,e);case"utf8":case"utf-8":return A(this,t,e);case"ascii":return O(this,t,e);case"latin1":case"binary":return k(this,t,e);case"base64":return R(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,e);default:if(r)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),r=!0;}}function h(o,t,e){var r=o[t];o[t]=o[e],o[e]=r}function b(o,t,a,s,n){if(0===o.length)return-1;if("string"==typeof a?(s=a,a=0):2147483647<a?a=2147483647:-2147483648>a&&(a=-2147483648),a=+a,isNaN(a)&&(a=n?0:o.length-1),0>a&&(a=o.length+a),a>=o.length){if(n)return-1;a=o.length-1}else if(0>a){if(!n)return-1;a=0}if("string"==typeof t&&(t=re.from(t,s)),re.isBuffer(t))return 0===t.length?-1:m(o,t,a,s,n);if("number"==typeof t)return t&=255,re.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(o,t,a):Uint8Array.prototype.lastIndexOf.call(o,t,a):m(o,[t],a,s,n);throw new TypeError("val must be string, number or Buffer")}function m(p,t,e,r,n){function i(r,t){return 1===o?r[t]:r.readUInt16BE(t*o)}var o=1,s=p.length,a=t.length;if(void 0!==r&&("ucs2"===(r=(r+"").toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>p.length||2>t.length)return-1;o=2,s/=2,a/=2,e/=2}var d;if(n){var u=-1;for(d=e;d<s;d++)if(!(i(p,d)===i(t,-1==u?0:d-u)))-1!=u&&(d-=d-u),u=-1;else if(-1==u&&(u=d),d-u+1===a)return u*o}else for(e+a>s&&(e=s-a),d=e;0<=d;d--){for(var c=!0,l=0;l<a;l++)if(i(p,d+l)!==i(t,l)){c=!1;break}if(c)return d}return-1}function w(l,t,e,p){e=+e||0;var d=l.length-e;p?(p=+p)>d&&(p=d):p=d;var i=t.length;if(0!=i%2)throw new TypeError("Invalid hex string");p>i/2&&(p=i/2);for(var o,a=0;a<p;++a){if(o=parseInt(t.substr(2*a,2),16),isNaN(o))return a;l[e+a]=o}return a}function _(o,t,e,r){return J(oe(t,o.length-e),o,e,r)}function E(o,t,e,r){return J(q(t),o,e,r)}function S(o,t,e,r){return E(o,t,e,r)}function v(o,t,e,r){return J(ae(t),o,e,r)}function T(o,t,e,r){return J(H(t,o.length-e),o,e,r)}function R(n,t,e){return 0===t&&e===n.length?X.fromByteArray(n):X.fromByteArray(n.slice(t,e))}function A(p,t,e){e=W(p.length,e);for(var r=[],n=t;n<e;){var i=p[n],o=null,s=239<i?4:223<i?3:191<i?2:1;if(n+s<=e){var a,d,u,c;1==s?128>i&&(o=i):2==s?(a=p[n+1],128==(192&a)&&127<(c=(31&i)<<6|63&a)&&(o=c)):3==s?(a=p[n+1],d=p[n+2],128==(192&a)&&128==(192&d)&&2047<(c=(15&i)<<12|(63&a)<<6|63&d)&&(55296>c||57343<c)&&(o=c)):4==s?(a=p[n+1],d=p[n+2],u=p[n+3],128==(192&a)&&128==(192&d)&&128==(192&u)&&65535<(c=(15&i)<<18|(63&a)<<12|(63&d)<<6|63&u)&&1114112>c&&(o=c)):void 0}null===o?(o=65533,s=1):65535<o&&(o-=65536,r.push(55296|1023&o>>>10),o=56320|1023&o),r.push(o),n+=s}return x(r)}function x(o){var t=o.length;if(t<=K)return a.apply(String,o);for(var e="",r=0;r<t;)e+=a.apply(String,o.slice(r,r+=K));return e}function O(o,t,e){var r="";e=W(o.length,e);for(var n=t;n<e;++n)r+=a(127&o[n]);return r}function k(o,t,e){var r="";e=W(o.length,e);for(var n=t;n<e;++n)r+=a(o[n]);return r}function B(a,t,s){var l=a.length;(!t||0>t)&&(t=0),(!s||0>s||s>l)&&(s=l);for(var n="",i=t;i<s;++i)n+=ne(a[i]);return n}function P(s,t,e){for(var r=s.slice(t,e),n="",i=0;i<r.length;i+=2)n+=a(r[i]+256*r[i+1]);return n}function j(n,t,e){if(0!=n%1||0>n)throw new RangeError("offset is not uint");if(n+t>e)throw new RangeError("Trying to access beyond buffer length")}function L(o,t,e,r,n,a){if(!re.isBuffer(o))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(t>n||t<a)throw new RangeError("\"value\" argument is out of bounds");if(e+r>o.length)throw new RangeError("Index out of range")}function M(a,t,e,r){0>t&&(t=65535+t+1);for(var n=0,s=W(a.length-e,2);n<s;++n)a[e+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function U(a,t,e,r){0>t&&(t=4294967295+t+1);for(var n=0,s=W(a.length-e,4);n<s;++n)a[e+n]=255&t>>>8*(r?n:3-n)}function I(o,t,e,r){if(e+r>o.length)throw new RangeError("Index out of range");if(0>e)throw new RangeError("Index out of range")}function C(o,t,e,r,n){return n||I(o,t,e,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(o,t,e,r,23,4),e+4}function D(o,t,e,r,n){return n||I(o,t,e,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(o,t,e,r,52,8),e+8}function N(e){if(e=z(e).replace(Q,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function ne(e){return 16>e?"0"+e.toString(16):e.toString(16)}function oe(a,t){t=t||1/0;for(var e,r=a.length,n=null,l=[],o=0;o<r;++o){if(55295<(e=a.charCodeAt(o))&&57344>e){if(!n){if(56319<e){-1<(t-=3)&&l.push(239,191,189);continue}if(o+1===r){-1<(t-=3)&&l.push(239,191,189);continue}n=e;continue}if(56320>e){-1<(t-=3)&&l.push(239,191,189),n=e;continue}e=65536+(n-55296<<10|e-56320)}else n&&-1<(t-=3)&&l.push(239,191,189);if(n=null,128>e){if(0>(t-=1))break;l.push(e)}else if(2048>e){if(0>(t-=2))break;l.push(192|e>>6,128|63&e)}else if(65536>e){if(0>(t-=3))break;l.push(224|e>>12,128|63&e>>6,128|63&e)}else{if(!(1114112>e))throw new Error("Invalid code point");if(0>(t-=4))break;l.push(240|e>>18,128|63&e>>12,128|63&e>>6,128|63&e)}}return l}function q(n){for(var t=[],e=0;e<n.length;++e)t.push(255&n.charCodeAt(e));return t}function H(a,t){for(var e,r,n,i=[],o=0;o<a.length&&!(0>(t-=2));++o)e=a.charCodeAt(o),r=e>>8,n=e%256,i.push(n),i.push(r);return i}function ae(e){return X.toByteArray(N(e))}function J(o,t,e,r){for(var n=0;n<r&&!(n+e>=t.length||n>=o.length);++n)t[n+e]=o[n];return n}function G(e){return e!==e}var X=e(41),V=e(44),Z=e(13);y.Buffer=re,y.SlowBuffer=function(e){return+e!=e&&(e=0),re.alloc(+e)},y.INSPECT_MAX_BYTES=50,re.TYPED_ARRAY_SUPPORT=void 0===r.TYPED_ARRAY_SUPPORT?function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}():r.TYPED_ARRAY_SUPPORT,y.kMaxLength=ee(),re.poolSize=8192,re._augment=function(e){return e.__proto__=re.prototype,e},re.from=function(o,t,e){return n(null,o,t,e)},re.TYPED_ARRAY_SUPPORT&&(re.prototype.__proto__=Uint8Array.prototype,re.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&re[Symbol.species]===re&&Object.defineProperty(re,Symbol.species,{value:null,configurable:!0})),re.alloc=function(n,t,e){return s(null,n,t,e)},re.allocUnsafe=function(e){return i(null,e)},re.allocUnsafeSlow=function(e){return i(null,e)},re.isBuffer=function(e){return null!=e&&e._isBuffer},re.compare=function(o,t){if(!re.isBuffer(o)||!re.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(o===t)return 0;for(var e=o.length,r=t.length,n=0,a=W(e,r);n<a;++n)if(o[n]!==t[n]){e=o[n],r=t[n];break}return e<r?-1:r<e?1:0},re.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},re.concat=function(o,t){if(!Z(o))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===o.length)return re.alloc(0);var e;if(void 0===t)for(t=0,e=0;e<o.length;++e)t+=o[e].length;var r=re.allocUnsafe(t),n=0;for(e=0;e<o.length;++e){var a=o[e];if(!re.isBuffer(a))throw new TypeError("\"list\" argument must be an Array of Buffers");a.copy(r,n),n+=a.length}return r},re.byteLength=d,re.prototype._isBuffer=!0,re.prototype.swap16=function(){var r=this.length;if(0!=r%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<r;t+=2)h(this,t,t+1);return this},re.prototype.swap32=function(){var r=this.length;if(0!=r%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<r;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},re.prototype.swap64=function(){var r=this.length;if(0!=r%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<r;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},re.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?A(this,0,e):g.apply(this,arguments)},re.prototype.equals=function(e){if(!re.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===re.compare(this,e)},re.prototype.inspect=function(){var e="",t=y.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},re.prototype.compare=function(o,t,e,r,n){if(!re.isBuffer(o))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===e&&(e=o?o.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),0>t||e>o.length||0>r||n>this.length)throw new RangeError("out of range index");if(r>=n&&t>=e)return 0;if(r>=n)return-1;if(t>=e)return 1;if(t>>>=0,e>>>=0,r>>>=0,n>>>=0,this===o)return 0;for(var i=n-r,s=e-t,a=W(i,s),p=this.slice(r,n),d=o.slice(t,e),u=0;u<a;++u)if(p[u]!==d[u]){i=p[u],s=d[u];break}return i<s?-1:s<i?1:0},re.prototype.includes=function(n,t,e){return-1!==this.indexOf(n,t,e)},re.prototype.indexOf=function(n,t,e){return b(this,n,t,e,!0)},re.prototype.lastIndexOf=function(n,t,e){return b(this,n,t,e,!1)},re.prototype.write=function(a,t,s,r){if(void 0===t)r="utf8",s=this.length,t=0;else if(void 0===s&&"string"==typeof t)r=t,s=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(s)?(s|=0,void 0===r&&(r="utf8")):(r=s,s=void 0)}var n=this.length-t;if((void 0===s||s>n)&&(s=n),0<a.length&&(0>s||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return w(this,a,t,s);case"utf8":case"utf-8":return _(this,a,t,s);case"ascii":return E(this,a,t,s);case"latin1":case"binary":return S(this,a,t,s);case"base64":return v(this,a,t,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,a,t,s);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0;}},re.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;re.prototype.slice=function(o,a){var l=this.length;o=~~o,a=void 0===a?l:~~a,0>o?0>(o+=l)&&(o=0):o>l&&(o=l),0>a?0>(a+=l)&&(a=0):a>l&&(a=l),a<o&&(a=o);var r;if(re.TYPED_ARRAY_SUPPORT)r=this.subarray(o,a),r.__proto__=re.prototype;else{var n=a-o;r=new re(n,void 0);for(var i=0;i<n;++i)r[i]=this[i+o]}return r},re.prototype.readUIntLE=function(a,t,e){a|=0,t|=0,e||j(a,t,this.length);for(var r=this[a],n=1,s=0;++s<t&&(n*=256);)r+=this[a+s]*n;return r},re.prototype.readUIntBE=function(o,t,e){o|=0,t|=0,e||j(o,t,this.length);for(var r=this[o+--t],n=1;0<t&&(n*=256);)r+=this[o+--t]*n;return r},re.prototype.readUInt8=function(r,t){return t||j(r,1,this.length),this[r]},re.prototype.readUInt16LE=function(r,t){return t||j(r,2,this.length),this[r]|this[r+1]<<8},re.prototype.readUInt16BE=function(r,t){return t||j(r,2,this.length),this[r]<<8|this[r+1]},re.prototype.readUInt32LE=function(r,t){return t||j(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},re.prototype.readUInt32BE=function(r,t){return t||j(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},re.prototype.readIntLE=function(a,t,e){a|=0,t|=0,e||j(a,t,this.length);for(var r=this[a],n=1,s=0;++s<t&&(n*=256);)r+=this[a+s]*n;return n*=128,r>=n&&(r-=Y(2,8*t)),r},re.prototype.readIntBE=function(a,t,e){a|=0,t|=0,e||j(a,t,this.length);for(var r=t,n=1,s=this[a+--r];0<r&&(n*=256);)s+=this[a+--r]*n;return n*=128,s>=n&&(s-=Y(2,8*t)),s},re.prototype.readInt8=function(r,t){return t||j(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},re.prototype.readInt16LE=function(n,t){t||j(n,2,this.length);var e=this[n]|this[n+1]<<8;return 32768&e?4294901760|e:e},re.prototype.readInt16BE=function(n,t){t||j(n,2,this.length);var e=this[n+1]|this[n]<<8;return 32768&e?4294901760|e:e},re.prototype.readInt32LE=function(r,t){return t||j(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},re.prototype.readInt32BE=function(r,t){return t||j(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},re.prototype.readFloatLE=function(r,t){return t||j(r,4,this.length),V.read(this,r,!0,23,4)},re.prototype.readFloatBE=function(r,t){return t||j(r,4,this.length),V.read(this,r,!1,23,4)},re.prototype.readDoubleLE=function(r,t){return t||j(r,8,this.length),V.read(this,r,!0,52,8)},re.prototype.readDoubleBE=function(r,t){return t||j(r,8,this.length),V.read(this,r,!1,52,8)},re.prototype.writeUIntLE=function(a,s,e,r){(a=+a,s|=0,e|=0,!r)&&L(this,a,s,e,Y(2,8*e)-1,0);var l=1,i=0;for(this[s]=255&a;++i<e&&(l*=256);)this[s+i]=255&a/l;return s+e},re.prototype.writeUIntBE=function(a,s,e,r){(a=+a,s|=0,e|=0,!r)&&L(this,a,s,e,Y(2,8*e)-1,0);var l=e-1,i=1;for(this[s+l]=255&a;0<=--l&&(i*=256);)this[s+l]=255&a/i;return s+e},re.prototype.writeUInt8=function(n,o,e){return n=+n,o|=0,e||L(this,n,o,1,255,0),re.TYPED_ARRAY_SUPPORT||(n=F(n)),this[o]=255&n,o+1},re.prototype.writeUInt16LE=function(n,o,e){return n=+n,o|=0,e||L(this,n,o,2,65535,0),re.TYPED_ARRAY_SUPPORT?(this[o]=255&n,this[o+1]=n>>>8):M(this,n,o,!0),o+2},re.prototype.writeUInt16BE=function(n,o,e){return n=+n,o|=0,e||L(this,n,o,2,65535,0),re.TYPED_ARRAY_SUPPORT?(this[o]=n>>>8,this[o+1]=255&n):M(this,n,o,!1),o+2},re.prototype.writeUInt32LE=function(n,o,e){return n=+n,o|=0,e||L(this,n,o,4,4294967295,0),re.TYPED_ARRAY_SUPPORT?(this[o+3]=n>>>24,this[o+2]=n>>>16,this[o+1]=n>>>8,this[o]=255&n):U(this,n,o,!0),o+4},re.prototype.writeUInt32BE=function(n,o,e){return n=+n,o|=0,e||L(this,n,o,4,4294967295,0),re.TYPED_ARRAY_SUPPORT?(this[o]=n>>>24,this[o+1]=n>>>16,this[o+2]=n>>>8,this[o+3]=255&n):U(this,n,o,!1),o+4},re.prototype.writeIntLE=function(l,p,e,r){if(l=+l,p|=0,!r){var d=Y(2,8*e-1);L(this,l,p,e,d-1,-d)}var u=0,o=1,s=0;for(this[p]=255&l;++u<e&&(o*=256);)0>l&&0==s&&0!==this[p+u-1]&&(s=1),this[p+u]=255&(l/o>>0)-s;return p+e},re.prototype.writeIntBE=function(l,p,e,r){if(l=+l,p|=0,!r){var d=Y(2,8*e-1);L(this,l,p,e,d-1,-d)}var u=e-1,o=1,s=0;for(this[p+u]=255&l;0<=--u&&(o*=256);)0>l&&0==s&&0!==this[p+u+1]&&(s=1),this[p+u]=255&(l/o>>0)-s;return p+e},re.prototype.writeInt8=function(n,o,e){return n=+n,o|=0,e||L(this,n,o,1,127,-128),re.TYPED_ARRAY_SUPPORT||(n=F(n)),0>n&&(n=255+n+1),this[o]=255&n,o+1},re.prototype.writeInt16LE=function(n,o,e){return n=+n,o|=0,e||L(this,n,o,2,32767,-32768),re.TYPED_ARRAY_SUPPORT?(this[o]=255&n,this[o+1]=n>>>8):M(this,n,o,!0),o+2},re.prototype.writeInt16BE=function(n,o,e){return n=+n,o|=0,e||L(this,n,o,2,32767,-32768),re.TYPED_ARRAY_SUPPORT?(this[o]=n>>>8,this[o+1]=255&n):M(this,n,o,!1),o+2},re.prototype.writeInt32LE=function(n,o,e){return n=+n,o|=0,e||L(this,n,o,4,2147483647,-2147483648),re.TYPED_ARRAY_SUPPORT?(this[o]=255&n,this[o+1]=n>>>8,this[o+2]=n>>>16,this[o+3]=n>>>24):U(this,n,o,!0),o+4},re.prototype.writeInt32BE=function(n,o,e){return n=+n,o|=0,e||L(this,n,o,4,2147483647,-2147483648),0>n&&(n=4294967295+n+1),re.TYPED_ARRAY_SUPPORT?(this[o]=n>>>24,this[o+1]=n>>>16,this[o+2]=n>>>8,this[o+3]=255&n):U(this,n,o,!1),o+4},re.prototype.writeFloatLE=function(n,t,e){return C(this,n,t,!0,e)},re.prototype.writeFloatBE=function(n,t,e){return C(this,n,t,!1,e)},re.prototype.writeDoubleLE=function(n,t,e){return D(this,n,t,!0,e)},re.prototype.writeDoubleBE=function(n,t,e){return D(this,n,t,!1,e)},re.prototype.copy=function(o,t,e,r){if(e||(e=0),r||0===r||(r=this.length),t>=o.length&&(t=o.length),t||(t=0),0<r&&r<e&&(r=e),r===e)return 0;if(0===o.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),o.length-t<r-e&&(r=o.length-t+e);var n,a=r-e;if(this===o&&e<t&&t<r)for(n=a-1;0<=n;--n)o[n+t]=this[n+e];else if(1e3>a||!re.TYPED_ARRAY_SUPPORT)for(n=0;n<a;++n)o[n+t]=this[n+e];else Uint8Array.prototype.set.call(o,this.subarray(e,e+a),t);return a},re.prototype.fill=function(o,l,p,d){if("string"==typeof o){if("string"==typeof l?(d=l,l=0,p=this.length):"string"==typeof p&&(d=p,p=this.length),1===o.length){var c=o.charCodeAt(0);256>c&&(o=c)}if(void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!re.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else"number"==typeof o&&(o&=255);if(0>l||this.length<l||this.length<p)throw new RangeError("Out of range index");if(p<=l)return this;l>>>=0,p=void 0===p?this.length:p>>>0,o||(o=0);var i;if("number"==typeof o)for(i=l;i<p;++i)this[i]=o;else{var s=re.isBuffer(o)?o:oe(new re(o,d).toString()),a=s.length;for(i=0;i<p-l;++i)this[i+l]=s[i%a]}return this};var Q=/[^+\/0-9A-Za-z-_]/g}).call(y,e(7))},function(o,t,e){function r(){n.call(this)}o.exports=r;var n=e(15).EventEmitter;e(2)(r,n),r.Readable=e(6),r.Writable=e(66),r.Duplex=e(61),r.Transform=e(65),r.PassThrough=e(64),r.Stream=r,r.prototype.pipe=function(i,t){function e(t){i.writable&&!1===i.write(t)&&p.pause&&p.pause()}function r(){p.readable&&p.resume&&p.resume()}function l(){d||(d=!0,i.end())}function o(){d||(d=!0,"function"==typeof i.destroy&&i.destroy())}function s(e){if(a(),0===n.listenerCount(this,"error"))throw e}function a(){p.removeListener("data",e),i.removeListener("drain",r),p.removeListener("end",l),p.removeListener("close",o),p.removeListener("error",s),i.removeListener("error",s),p.removeListener("end",a),p.removeListener("close",a),i.removeListener("close",a)}var p=this;p.on("data",e),i.on("drain",r),i._isStdio||t&&!1===t.end||(p.on("end",l),p.on("close",o));var d=!1;return p.on("error",s),i.on("error",s),p.on("end",a),p.on("close",a),i.on("close",a),i.emit("pipe",p),i}},function(e){e.exports="function"==typeof Object.create?function(r,n){r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:function(n,t){n.super_=t;var e=function(){};e.prototype=t.prototype,n.prototype=new e,n.prototype.constructor=n}},function(e){function b(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function n(e){if(u===setTimeout)return setTimeout(e,0);if((u===b||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){d&&h&&(d=!1,h.length?p=h.concat(p):_=-1,p.length&&s())}function s(){if(!d){var r=n(o);d=!0;for(var t=p.length;t;){for(h=p,p=[];++_<t;)h&&h[_].run();_=-1,t=p.length}h=null,d=!1,i(r)}}function a(r,t){this.fun=r,this.array=t}function t(){}var u,f,m=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:b}catch(e){u=b}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,p=[],d=!1,_=-1;m.nextTick=function(o){var t=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];p.push(new a(o,t)),1!==p.length||d||n(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=t,m.addListener=t,m.once=t,m.off=t,m.removeListener=t,m.removeAllListeners=t,m.emit=t,m.prependListener=t,m.prependOnceListener=t,m.listeners=function(){return[]},m.binding=function(){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},function(n,O,e){(function(b,w){function I(e,t){var r={seen:[],stylize:o};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),d(t)?r.showHidden=t:t&&O._extend(r,t),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),D(r,e,r.depth)}function i(n,t){var e=I.styles[t];return e?"\x1B["+I.colors[e][0]+"m"+n+"\x1B["+I.colors[e][1]+"m":n}function o(e){return e}function C(r){var n={};return r.forEach(function(e){n[e]=!0}),n}function D(d,t,r){if(d.customInspect&&t&&T(t.inspect)&&t.inspect!==O.inspect&&(!t.constructor||t.constructor.prototype!==t)){var e=t.inspect(r,d);return g(e)||(e=D(d,e,r)),e}var n=a(d,t);if(n)return n;var o=Object.keys(t),s=C(o);if(d.showHidden&&(o=Object.getOwnPropertyNames(t)),S(t)&&(0<=o.indexOf("message")||0<=o.indexOf("description")))return u(t);if(0===o.length){if(T(t)){var i=t.name?": "+t.name:"";return d.stylize("[Function"+i+"]","special")}if(v(t))return d.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return d.stylize(Date.prototype.toString.call(t),"date");if(S(t))return u(t)}var h="",y=!1,b=["{","}"];if((p(t)&&(y=!0,b=["[","]"]),T(t))&&(h=" [Function"+(t.name?": "+t.name:"")+"]"),v(t)&&(h=" "+RegExp.prototype.toString.call(t)),E(t)&&(h=" "+Date.prototype.toUTCString.call(t)),S(t)&&(h=" "+u(t)),0===o.length&&(!y||0==t.length))return b[0]+h+b[1];if(0>r)return v(t)?d.stylize(RegExp.prototype.toString.call(t),"regexp"):d.stylize("[Object]","special");d.seen.push(t);var w;return w=y?c(d,t,r,s,o):o.map(function(n){return l(d,t,r,s,n,y)}),d.seen.pop(),f(w,h,b)}function a(o,t){if(y(t))return o.stylize("undefined","undefined");if(g(t)){var e="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\"")+"'";return o.stylize(e,"string")}return n(t)?o.stylize(""+t,"number"):d(t)?o.stylize(""+t,"boolean"):h(t)?o.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function c(p,t,e,r,n){for(var d=[],o=0,s=t.length;o<s;++o)x(t,o+"")?d.push(l(p,t,e,r,o+"",!0)):d.push("");return n.forEach(function(n){n.match(/^\d+$/)||d.push(l(p,t,e,r,n,!0))}),d}function l(l,t,e,r,n,i){var o,s,a;if(a=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},a.get?s=a.set?l.stylize("[Getter/Setter]","special"):l.stylize("[Getter]","special"):a.set&&(s=l.stylize("[Setter]","special")),x(r,n)||(o="["+n+"]"),s||(0>l.seen.indexOf(a.value)?(s=h(e)?D(l,a.value,null):D(l,a.value,e-1),-1<s.indexOf("\n")&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=l.stylize("[Circular]","special")),y(o)){if(i&&n.match(/^\d+$/))return s;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=l.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,"\"").replace(/(^"|"$)/g,"'"),o=l.stylize(o,"string"))}return o+": "+s}function f(o,t,e){var r=0;return 60<o.reduce(function(n,t){return r++,0<=t.indexOf("\n")&&r++,n+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?e[0]+(""===t?"":t+"\n ")+" "+o.join(",\n  ")+" "+e[1]:e[0]+t+" "+o.join(", ")+" "+e[1]}function p(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function h(e){return null===e}function n(e){return"number"==typeof e}function g(e){return"string"==typeof e}function y(e){return void 0===e}function v(e){return m(e)&&"[object RegExp]"===r(e)}function m(e){return"object"==typeof e&&null!==e}function E(e){return m(e)&&"[object Date]"===r(e)}function S(e){return m(e)&&("[object Error]"===r(e)||e instanceof Error)}function T(e){return"function"==typeof e}function r(e){return Object.prototype.toString.call(e)}function _(e){return 10>e?"0"+e.toString(10):e.toString(10)}function t(){var r=new Date,t=[_(r.getHours()),_(r.getMinutes()),_(r.getSeconds())].join(":");return[r.getDate(),B[r.getMonth()],t].join(" ")}function x(r,t){return Object.prototype.hasOwnProperty.call(r,t)}var R=/%[sdj%]/g;O.format=function(i){if(!g(i)){for(var t=[],e=0;e<arguments.length;e++)t.push(I(arguments[e]));return t.join(" ")}for(var e=1,r=arguments,n=r.length,o=(i+"").replace(R,function(o){if("%%"===o)return"%";if(e>=n)return o;switch(o){case"%s":return r[e++]+"";case"%d":return+r[e++];case"%j":try{return JSON.stringify(r[e++])}catch(e){return"[Circular]"}default:return o;}}),s=r[e];e<n;s=r[++e])o+=h(s)||!m(s)?" "+s:" "+I(s);return o},O.deprecate=function(e,t){if(y(b.process))return function(){return O.deprecate(e,t).apply(this,arguments)};if(!0===w.noDeprecation)return e;var r=!1;return function(){if(!r){if(w.throwDeprecation)throw new Error(t);w.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}};var A,k={};O.debuglog=function(e){if(y(A)&&(A=w.env.NODE_DEBUG||""),e=e.toUpperCase(),!k[e])if(new RegExp("\\b"+e+"\\b","i").test(A)){var t=w.pid;k[e]=function(){var r=O.format.apply(O,arguments);console.error("%s %d: %s",e,t,r)}}else k[e]=function(){};return k[e]},O.inspect=I,I.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},I.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},O.isArray=p,O.isBoolean=d,O.isNull=h,O.isNullOrUndefined=function(e){return null==e},O.isNumber=n,O.isString=g,O.isSymbol=function(e){return"symbol"==typeof e},O.isUndefined=y,O.isRegExp=v,O.isObject=m,O.isDate=E,O.isError=S,O.isFunction=T,O.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},O.isBuffer=e(70);var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];O.log=function(){console.log("%s - %s",t(),O.format.apply(O,arguments))},O.inherits=e(69),O._extend=function(o,t){if(!t||!m(t))return o;for(var a=Object.keys(t),r=a.length;r--;)o[a[r]]=t[a[r]];return o}}).call(O,e(7),e(3))},function(d,t,e){"use strict";function r(e){return this instanceof r?void(u.call(this,e),f.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",n)):new r(e)}function n(){this.allowHalfOpen||this._writableState.ended||s(i,this)}function i(e){e.end()}var o=Object.keys||function(n){var t=[];for(var e in n)t.push(e);return t};d.exports=r;var s=e(14),a=e(8);a.inherits=e(2);var u=e(28),f=e(16);a.inherits(r,u);for(var c,p=o(f.prototype),l=0;l<p.length;l++)c=p[l],r.prototype[c]||(r.prototype[c]=f.prototype[c])},function(n,t,e){t=n.exports=e(28),t.Stream=t,t.Readable=t,t.Writable=e(16),t.Duplex=e(5),t.Transform=e(29),t.PassThrough=e(62)},function(e){var t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(n,o,e){(function(e){function r(e){return Object.prototype.toString.call(e)}o.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},o.isBoolean=function(e){return"boolean"==typeof e},o.isNull=function(e){return null===e},o.isNullOrUndefined=function(e){return null==e},o.isNumber=function(e){return"number"==typeof e},o.isString=function(e){return"string"==typeof e},o.isSymbol=function(e){return"symbol"==typeof e},o.isUndefined=function(e){return void 0===e},o.isRegExp=function(e){return"[object RegExp]"===r(e)},o.isObject=function(e){return"object"==typeof e&&null!==e},o.isDate=function(e){return"[object Date]"===r(e)},o.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},o.isFunction=function(e){return"function"==typeof e},o.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},o.isBuffer=e.isBuffer}).call(o,e(0).Buffer)},function(n,t,e){"use strict";(function(t){n.exports=function(e){return e=e||this,new Promise(function(o,r){var n=[];e.on("data",function(e){n.push(e)}).on("end",function(){o(t.isBuffer(n[0])?t.concat(n).toString():n)}).on("error",r)})}}).call(t,e(0).Buffer)},function(o,t,e){var a=e(39);o.exports=function(n,t){return n=n||{},Object.keys(t).forEach(function(e){void 0===n[e]&&(n[e]=a(t[e]))}),n}},function(n,o,e){(function(m){var e=function(){"use strict";function e(r,n){return null!=n&&r instanceof n}function t(r,c,n,o,s){function l(r,i){if(null===r)return null;if(0===i)return r;var y,g;if("object"!=typeof r)return r;if(e(r,a))y=new a;else if(e(r,u))y=new u;else if(e(r,f))y=new f(function(n,o){r.then(function(t){n(l(t,i-1))},function(e){o(l(e,i-1))})});else if(t.__isArray(r))y=[];else if(t.__isRegExp(r))y=new RegExp(r.source,x(r)),r.lastIndex&&(y.lastIndex=r.lastIndex);else if(t.__isDate(r))y=new Date(r.getTime());else{if(d&&m.isBuffer(r))return y=new m(r.length),r.copy(y),y;e(r,Error)?y=Object.create(r):void 0===o?(g=Object.getPrototypeOf(r),y=Object.create(g)):(y=Object.create(o),g=o)}if(c){var b=h.indexOf(r);if(-1!=b)return p[b];h.push(r),p.push(y)}for(var R in e(r,a)&&r.forEach(function(o,t){var e=l(t,i-1),r=l(o,i-1);y.set(e,r)}),e(r,u)&&r.forEach(function(r){var t=l(r,i-1);y.add(t)}),r){var v;g&&(v=Object.getOwnPropertyDescriptor(g,R)),v&&null==v.set||(y[R]=l(r[R],i-1))}if(Object.getOwnPropertySymbols)for(var w=Object.getOwnPropertySymbols(r),R=0;R<w.length;R++){var _=w[R],E=Object.getOwnPropertyDescriptor(r,_);(!E||E.enumerable||s)&&(y[_]=l(r[_],i-1),E.enumerable||Object.defineProperty(y,_,{enumerable:!1}))}if(s)for(var k=Object.getOwnPropertyNames(r),R=0;R<k.length;R++){var T=k[R],E=Object.getOwnPropertyDescriptor(r,T);E&&E.enumerable||(y[T]=l(r[T],i-1),Object.defineProperty(y,T,{enumerable:!1}))}return y}"object"==typeof c&&(n=c.depth,o=c.prototype,s=c.includeNonEnumerable,c=c.circular);var h=[],p=[],d=void 0!==m;return void 0===c&&(c=!0),void 0===n&&(n=1/0),l(r,n)}function r(e){return Object.prototype.toString.call(e)}function x(r){var t="";return r.global&&(t+="g"),r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),t}var a;try{a=Map}catch(e){a=function(){}}var u;try{u=Set}catch(e){u=function(){}}var f;try{f=Promise}catch(e){f=function(){}}return t.clonePrototype=function(r){if(null===r)return null;var t=function(){};return t.prototype=r,new t},t.__objToStr=r,t.__isDate=function(e){return"object"==typeof e&&"[object Date]"===r(e)},t.__isArray=function(e){return"object"==typeof e&&"[object Array]"===r(e)},t.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===r(e)},t.__getRegExpFlags=x,t}();"object"==typeof n&&n.exports&&(n.exports=e)}).call(o,e(0).Buffer)},function(n,a,e){"use strict";(function(l){var t=e(0),p=t.Buffer,r=t.SlowBuffer,i=t.kMaxLength||2147483647;a.alloc=function(s,l,e){if("function"==typeof p.alloc)return p.alloc(s,l,e);if("number"==typeof e)throw new TypeError("encoding must not be number");if("number"!=typeof s)throw new TypeError("size must be a number");if(s>i)throw new RangeError("size is too large");var d=e,n=l;void 0===n&&(d=void 0,n=0);var g=new p(s);if("string"==typeof n)for(var a=new p(n,d),u=a.length,f=-1;++f<s;)g[f]=a[f%u];else g.fill(n);return g},a.allocUnsafe=function(e){if("function"==typeof p.allocUnsafe)return p.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>i)throw new RangeError("size is too large");return new p(e)},a.from=function(t,i,r){if("function"==typeof p.from&&(!l.Uint8Array||Uint8Array.from!==p.from))return p.from(t,i,r);if("number"==typeof t)throw new TypeError("\"value\" argument must not be a number");if("string"==typeof t)return new p(t,i);if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var n=i;if(1===arguments.length)return new p(t);void 0===n&&(n=0);var o=r;if(void 0===o&&(o=t.byteLength-n),n>=t.byteLength)throw new RangeError("'offset' is out of bounds");if(o>t.byteLength-n)throw new RangeError("'length' is out of bounds");return new p(t.slice(n,n+o))}if(p.isBuffer(t)){var s=new p(t.length);return t.copy(s,0,0,t.length),s}if(t){if(Array.isArray(t)||"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return new p(t);if("Buffer"===t.type&&Array.isArray(t.data))return new p(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},a.allocUnsafeSlow=function(e){if("function"==typeof p.allocUnsafeSlow)return p.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=i)throw new RangeError("size is too large");return new r(e)}}).call(a,e(7))},function(e){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(n,t,e){"use strict";(function(l){n.exports=l.version&&0!==l.version.indexOf("v0.")&&(0!==l.version.indexOf("v1.")||0===l.version.indexOf("v1.8."))?l.nextTick:function(e,p,r,n){if("function"!=typeof e)throw new TypeError("\"callback\" argument must be a function");var i,o,s=arguments.length;switch(s){case 0:case 1:return l.nextTick(e);case 2:return l.nextTick(function(){e.call(null,p)});case 3:return l.nextTick(function(){e.call(null,p,r)});case 4:return l.nextTick(function(){e.call(null,p,r,n)});default:for(i=Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return l.nextTick(function(){e.apply(null,i)});}}}).call(t,e(3))},function(e){function a(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function l(e){return"function"==typeof e}function r(e){return"number"==typeof e}function n(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},a.prototype.emit=function(s){var t,e,r,i,a,p;if(this._events||(this._events={}),"error"===s&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error("Uncaught, unspecified \"error\" event. ("+t+")");throw d.context=t,d}if(e=this._events[s],o(e))return!1;if(l(e))switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),e.apply(this,i);}else if(n(e))for(i=Array.prototype.slice.call(arguments,1),p=e.slice(),r=p.length,a=0;a<r;a++)p[a].apply(this,i);return!0},a.prototype.addListener=function(r,t){var e;if(!l(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",r,l(t.listener)?t.listener:t),this._events[r]?n(this._events[r])?this._events[r].push(t):this._events[r]=[this._events[r],t]:this._events[r]=t,n(this._events[r])&&!this._events[r].warned&&(e=o(this._maxListeners)?a.defaultMaxListeners:this._maxListeners)&&0<e&&this._events[r].length>e&&(this._events[r].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[r].length),"function"==typeof console.trace&&console.trace()),this},a.prototype.on=a.prototype.addListener,a.prototype.once=function(n,t){function e(){this.removeListener(n,e),r||(r=!0,t.apply(this,arguments))}if(!l(t))throw TypeError("listener must be a function");var r=!1;return e.listener=t,this.on(n,e),this},a.prototype.removeListener=function(o,t){var e,r,i,s;if(!l(t))throw TypeError("listener must be a function");if(!this._events||!this._events[o])return this;if(e=this._events[o],i=e.length,r=-1,e===t||l(e.listener)&&e.listener===t)delete this._events[o],this._events.removeListener&&this.emit("removeListener",o,t);else if(n(e)){for(s=i;0<s--;)if(e[s]===t||e[s].listener&&e[s].listener===t){r=s;break}if(0>r)return this;1===e.length?(e.length=0,delete this._events[o]):e.splice(r,1),this._events.removeListener&&this.emit("removeListener",o,t)}return this},a.prototype.removeAllListeners=function(n){var t,e;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[n]&&delete this._events[n],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(e=this._events[n],l(e))this.removeListener(n,e);else if(e)for(;e.length;)this.removeListener(n,e[e.length-1]);return delete this._events[n],this},a.prototype.listeners=function(e){return this._events&&this._events[e]?l(this._events[e])?[this._events[e]]:this._events[e].slice():[]},a.prototype.listenerCount=function(r){if(this._events){var t=this._events[r];if(l(t))return 1;if(t)return t.length}return 0},a.listenerCount=function(r,t){return r.listenerCount(t)}},function(L,t,M){"use strict";(function(t,e){function U(){}function r(n,t,e){this.chunk=n,this.encoding=t,this.callback=e,this.next=null}function n(r,a){w=w||M(5),r=r||{},this.objectMode=!!r.objectMode,a instanceof w&&(this.objectMode=this.objectMode||!!r.writableObjectMode);var e=r.highWaterMark,t=this.objectMode?16:16384;this.highWaterMark=e||0===e?e:t,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=!1===r.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(a,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new _(this)}function o(e){return(w=w||M(5),!(k.call(o,this)||this instanceof w))?new o(e):void(this._writableState=new n(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),x.call(this))}function a(n,t){var e=new Error("write after end");n.emit("error",e),E(t,e)}function i(a,t,e,s){var n=!0,i=!1;return null===e?i=new TypeError("May not write null values to stream"):"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(a.emit("error",i),E(s,i),n=!1),n}function I(n,t,o){return n.objectMode||!1===n.decodeStrings||"string"!=typeof t||(t=A.from(t,o)),t}function u(o,t,e,p,n,i){e||(p=I(t,p,n),R.isBuffer(p)&&(n="buffer"));var s=t.objectMode?1:p.length;t.length+=s;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest=new r(p,n,i),d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else l(o,t,!1,s,p,n,i);return a}function l(a,t,e,r,n,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,e?a._writev(n,t.onwrite):a._write(n,i,t.onwrite),t.sync=!1}function s(o,t,e,r,n){--t.pendingcb,e?E(n,r):n(r),o._writableState.errorEmitted=!0,o.emit("error",r)}function p(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function d(a,t){var e=a._writableState,r=e.sync,n=e.writecb;if(p(e),t)s(a,e,r,t,n);else{var i=h(e);i||e.corked||e.bufferProcessing||!e.bufferedRequest||g(a,e),r?S(c,a,e,i,n):c(a,e,i,n)}}function c(o,t,e,r){e||f(o,t),t.pendingcb--,r(),b(o,t)}function f(r,t){0===t.length&&t.needDrain&&(t.needDrain=!1,r.emit("drain"))}function g(p,t){t.bufferProcessing=!0;var e=t.bufferedRequest;if(p._writev&&e&&e.next){var r=t.bufferedRequestCount,n=Array(r),i=t.corkedRequestsFree;i.entry=e;for(var o=0;e;)n[o]=e,e=e.next,o+=1;l(p,t,!0,t.length,n,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new _(t)}else{for(;e;){var s=e.chunk,a=e.encoding,d=e.callback;if(l(p,t,!1,t.objectMode?1:s.length,s,a,d),e=e.next,t.writing)break}null===e&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=e,t.bufferProcessing=!1}function h(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function y(r,t){t.prefinished||(t.prefinished=!0,r.emit("prefinish"))}function b(n,t){var e=h(t);return e&&(0===t.pendingcb?(y(n,t),t.finished=!0,n.emit("finish")):y(n,t)),e}function m(n,t,e){t.ending=!0,b(n,t),e&&(t.finished?E(e):n.once("finish",e)),t.ended=!0,n.writable=!1}function _(o){var t=this;this.next=null,this.entry=null,this.finish=function(e){var r=t.entry;for(t.entry=null;r;){var n=r.callback;o.pendingcb--,n(e),r=r.next}o.corkedRequestsFree?o.corkedRequestsFree.next=t:o.corkedRequestsFree=t}}L.exports=o;var w,E=M(14),S=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?e:E;o.WritableState=n;var v=M(8);v.inherits=M(2);var T={deprecate:M(68)},x=M(30),R=M(0).Buffer,A=M(12);v.inherits(o,x),n.prototype.getBuffer=function(){for(var r=this.bufferedRequest,t=[];r;)t.push(r),r=r.next;return t},function(){try{Object.defineProperty(n.prototype,"buffer",{get:T.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var k;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(o,Symbol.hasInstance,{value:function(e){return!!k.call(this,e)||e&&e._writableState instanceof n}})):k=function(e){return e instanceof this},o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},o.prototype.write=function(l,t,p){var d=this._writableState,n=!1,o=R.isBuffer(l);return"function"==typeof t&&(p=t,t=null),o?t="buffer":t||(t=d.defaultEncoding),"function"!=typeof p&&(p=U),d.ended?a(this,p):(o||i(this,d,l,p))&&(d.pendingcb++,n=u(this,d,o,l,t,p)),n},o.prototype.cork=function(){this._writableState.corked++},o.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||g(this,e))},o.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},o.prototype._write=function(n,t,e){e(new Error("_write() is not implemented"))},o.prototype._writev=null,o.prototype.end=function(o,a,s){var r=this._writableState;"function"==typeof o?(s=o,o=null,a=null):"function"==typeof a&&(s=a,a=null),null!==o&&void 0!==o&&this.write(o,a),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||m(this,r,s)}}).call(t,M(3),M(52).setImmediate)},function(l,t,e){"use strict";function r(e){this.options=s(e,{model:"",hesitation:"",decodeStrings:!1}),n.call(this,this.options),this.isJaCn="ja-JP"===this.options.model.substring(0,5)||"zh-CN"===this.options.model.substring(0,5),this._transform=this.options.objectMode?this.transformObject:this.transformString}var n=e(1).Transform,i=e(4),o=e(11),s=e(10);i.inherits(r,n);var a=/%HESITATION ?/g,p=/([a-z])\1{2,}/gi,d=/D_[^\s]+/g;r.prototype.clean=function(e){return e=e.replace(a,this.options.hesitation?this.options.hesitation.trim()+" ":this.options.hesitation).replace(p,"").replace(d,""),this.isJaCn&&(e=e.replace(/ /g,"")),e.trim()+" "},r.prototype.capitalize=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},r.prototype.period=function(e){return e=e.trim(),e?"\u2026"===e.substr(-1)?e+" ":e+(this.isJaCn?"\u3002":". "):" "},r.prototype.transformString=function(n,t,e){this.push(this.formatString(n.toString())),e()},r.prototype.transformObject=function(n,t,e){this.push(this.formatResult(n)),e()},r.prototype.formatString=function(r,t){return r=this.capitalize(this.clean(r)),t?r:this.period(r)},r.prototype.formatResult=function(a){return a=o(a),Array.isArray(a.results)&&a.results.forEach(function(t,e){var o=t.final||e!==a.results.length-1;t.alternatives=t.alternatives.map(function(e){return e.transcript=this.formatString(e.transcript,!o),e.timestamps&&(e.timestamps=e.timestamps.map(function(n,t,e){return n[0]=this.clean(n[0]),0===t&&(n[0]=this.capitalize(n[0])),t===e.length-1&&o&&(n[0]=this.period(n[0])),n},this).filter(function(e){return e[0]})),e},this)},this),a},r.prototype.promise=e(9),l.exports=r},function(p,t,d){"use strict";(function(r){function g(r){r.objectMode&&(r.readableObjectMode=!0,delete r.objectMode),e.call(this,r),this.options=r,this.listening=!1,this.initialized=!1,this.finished=!1,this.on("newListener",function(t){r.silent||("results"===t||"result"===t||"speaker_labels"===t?console.log(new Error("Watson Speech to Text RecognizeStream: the "+t+" event was deprecated. Please set {objectMode: true} and listen for the 'data' event instead. Pass {silent: true} to disable this message.")):"connection-close"===t?console.log(new Error("Watson Speech to Text RecognizeStream: the "+t+" event was deprecated. Please listen for the 'close' event instead. Pass {silent: true} to disable this message.")):"connect"==t&&console.log(new Error("Watson Speech to Text RecognizeStream: the "+t+" event was deprecated. Please listen for the 'open' event instead. Pass {silent: true} to disable this message.")))})}var e=d(1).Duplex,n=d(4),o=d(24),s=d(71).w3cwebsocket,a=d(31),y=d(36),f=["inactivity_timeout","timestamps","word_confidence","content-type","interim_results","keywords","keywords_threshold","max_alternatives","word_alternatives_threshold","profanity_filter","smart_formatting","speaker_labels"],c=["customization_id","model","watson-token","X-Watson-Learning-Opt-Out"];n.inherits(g,e),g.WEBSOCKET_CONNECTION_ERROR="WebSocket connection error",g.prototype.initialize=function(){function a(n,o,e){e?e.message=n+" "+e.message:e=new Error(n),e.raw=o,u.emit("error",e)}var t=this.options;t.token&&!t["watson-token"]&&(t["watson-token"]=t.token),t.content_type&&!t["content-type"]&&(t["content-type"]=t.content_type),t["X-WDC-PL-OPT-OUT"]&&!t["X-Watson-Learning-Opt-Out"]&&(t["X-Watson-Learning-Opt-Out"]=t["X-WDC-PL-OPT-OUT"]);var e=n._extend("customization_id"in t?o(t,c):{model:"en-US_BroadbandModel"},o(t,c)),r=y.stringify(e),i=(t.url||"wss://stream.watsonplatform.net/speech-to-text/api").replace(/^http/,"ws")+"/v1/recognize?"+r,l=o(t,f);l.action="start";var u=this,p=this.socket=new s(i,null,null,t.headers,null);u.on("finish",u.finish.bind(u)),p.onerror=function(r){u.listening=!1;var t=new Error("WebSocket connection error");t.name=g.WEBSOCKET_CONNECTION_ERROR,t.event=r,u.emit("error",t),u.push(null)},this.socket.onopen=function(){u.sendJSON(l),u.emit("open")},this.socket.onclose=function(e){u.listening=!1,u.push(null),u.emit("close",e.code,e.reason)},p.onmessage=function(o){if("string"!=typeof o.data)return a("Unexpected binary data received from server",o);var e;try{e=JSON.parse(o.data)}catch(t){return a("Invalid JSON received from service:",o,t)}u.emit("message",o,e),e.error?a(e.error,o):"listening"===e.state?u.listening?(u.listening=!1,p.close()):(u.listening=!0,u.emit("listening")):t.readableObjectMode?u.push(e):Array.isArray(e.results)&&e.results.forEach(function(e){e.final&&e.alternatives&&u.push(e.alternatives[0].transcript,"utf8")})},this.initialized=!0},g.prototype.sendJSON=function(e){return this.emit("send-json",e),this.socket.send(JSON.stringify(e))},g.prototype.sendData=function(e){return this.emit("send-data",e),this.socket.send(e)},g.prototype._read=function(){},g.ERROR_UNRECOGNIZED_FORMAT="UNRECOGNIZED_FORMAT",g.prototype._write=function(n,t,e){var r=this;if(!r.finished)if(this.initialized)r.sendData(n),this.afterSend(e);else{if(!this.options["content-type"]){var a=g.getContentType(n);if(!a){var i=new Error("Unable to determine content-type from file header, please specify manually.");return i.name=g.ERROR_UNRECOGNIZED_FORMAT,this.emit("error",i),void this.push(null)}this.options["content-type"]=a}this.initialize(),this.once("open",function(){r.sendData(n),r.afterSend(e)})}},g.prototype.afterSend=function(e){this.socket.bufferedAmount<=(this._writableState.highWaterMark||0)?r.nextTick(e):setTimeout(this.afterSend.bind(this,e),10)},g.prototype.stop=function(){this.emit("stop"),this.finish()},g.prototype.finish=function(){if(!this.finished){this.finished=!0;var r=this,t={action:"stop"};r.socket&&r.socket.readyState===r.socket.OPEN?r.sendJSON(t):this.once("open",function(){r.sendJSON(t)})}},g.prototype.promise=d(9),g.getContentType=function(e){return a(e.slice(0,4).toString().substr(0,4))},p.exports=g}).call(t,d(3))},function(a,t,e){"use strict";function r(e){e=e||{},e.objectMode=!0,n.call(this,e)}var n=e(1).Transform,i=e(4),o=e(11);i.inherits(r,n),r.prototype._transform=function(n,t,e){Array.isArray(n.results)?n.results.forEach(function(t){var e=o(t);e.index=n.result_index,this.push(e)},this):this.push(n),e()},r.prototype.promise=e(9),a.exports=r},function(l,t,e){"use strict";function p(e){e=e||{},e.objectMode=!0,this.options=e,r.call(this,e),this.results=[],this.speaker_labels=[],this.mismatchErrorEmitted=!1,this.extraLabels=!1}var r=e(1).Transform,n=e(4),o=e(46),s=e(33),d=e(11);n.inherits(p,r),p.prototype.isFinal=function(){return this.speaker_labels.length&&this.speaker_labels[this.speaker_labels.length-1].final},p.ERROR_MISMATCH="MISMATCH",p.prototype.buildMessage=function(){var u=this.isFinal();this.extraLabels=!1;var n=0,e=-1,t=this.speaker_labels.map(function(r){var t=this.results[n];e++;var a=t.alternatives[0].timestamps[e];if(a||(e=0,n++,t=this.results[n],a=t&&t.alternatives[0].timestamps[e]),!a)return this.extraLabels=!0,null;if(a[1]!==r.from||a[2]!==r.to){if(!this.mismatchErrorEmitted){var l=new Error("Mismatch between speaker_label and word timestamp");l.name=p.ERROR_MISMATCH,l.speaker_label=r,l.timestamp=a,l.speaker_labels=this.speaker_labels,l.results=this.results,this.emit("error",l),this.mismatchErrorEmitted=!0}return null}return{timestamp:a,speaker:r.speaker,result:t}},this);if(!this.extraLabels){t=t.filter(function(e){return e});var g=t.reduce(function(n,t){var e=n[n.length-1];return e&&e.speaker===t.speaker&&e.result===t.result?e.timestamps.push(t.timestamp):(e={speaker:t.speaker,timestamps:[t.timestamp],result:t.result},n.push(e)),n},[]);return{results:g.map(function(t,e){var r,n=g[e-1]||{};r=t.result===n.result?{alternatives:[{}]}:d(t.result),r.speaker=t.speaker;var o=r.alternatives[0];o.transcript=t.timestamps.map(function(e){return e[0]}).join(" ")+" ",o.timestamps=t.timestamps,r.final=u;var s=t.timestamps[0][1],a=t.timestamps[t.timestamps.length-1][2];if(t.result.word_alternatives){var i=t.result.word_alternatives.filter(function(e){return e.start_time>=s&&e.end_time<=a});r.word_alternatives=i}var p=t.result.keywords_result;if(p){var l={};Object.keys(p).forEach(function(r){var t=p[r].filter(function(e){return e.start_time>=s&&e.end_time<=a});t.length&&(l[r]=t)}),r.keywords_result=l}return r}),result_index:0}}},p.prototype.handleResults=function(r){if(s(r)){var t=new Error("SpeakerStream requires that timestamps and speaker_labels be enabled");return t.name=s.ERROR_NO_TIMESTAMPS,void this.emit("error",t)}r.results.filter(function(e){return e.final}).forEach(function(e){this.results.push(e)},this)},p.speakerLabelsSorter=function(r,t){return r.from===t.from?r.to===t.to?0:r.to<t.to?-1:1:r.from<t.from?-1:1},p.prototype.handleSpeakerLabels=function(r){var t=r.speaker_labels;o(this.speaker_labels,t,function(r,t){return r.from===t.from&&r.to===t.to}),this.speaker_labels.push.apply(this.speaker_labels,r.speaker_labels),this.speaker_labels.sort(p.speakerLabelsSorter)},p.prototype._transform=function(o,t,e){var r;Array.isArray(o.results)&&(this.handleResults(o),this.options.speakerlessInterim&&o.results.length&&!1===o.results[0].final&&(r=this.buildMessage(),r.results=r.results.concat(o.results)),this.extraLabels&&o.results.length&&!0===o.results[0].final&&(r=this.buildMessage())),Array.isArray(o.speaker_labels)&&(this.handleSpeakerLabels(o),r=this.buildMessage()),r&&this.push(r),e()},p.prototype._flush=function(n){var t=this.results.map(function(e){return e.alternatives[0].timestamps}).reduce(function(r,t){return r.concat(t)},[]);if(t.length!==this.speaker_labels.length){var e=t.length&&!this.speaker_labels.length?"No speaker_labels found. SpeakerStream requires speaker_labels to be enabled.":"Mismatch between number of word timestamps ("+t.length+") and number of speaker_labels ("+this.speaker_labels.length+") - some data may be lost.";var r=new Error(e);r.name=p.ERROR_MISMATCH,r.speaker_labels=this.speaker_labels,r.results=this.results,this.emit("error",r)}n()},p.prototype.promise=e(9),l.exports=p},function(a,t,e){"use strict";function r(e){if(this.options=e=o(e,{decodeStrings:!1,property:null,clear:!0}),this.el="string"==typeof e.outputElement?document.querySelector(e.outputElement):e.outputElement,!this.el)throw new Error("Watson Speech to Text WritableElementStream: missing outputElement");n.call(this,e);this.prop=e.property||{INPUT:"value",TEXTAREA:"value"}[this.el.nodeName]||"textContent",e.clear&&(this.el[this.prop]=""),e.objectMode?(this.finalizedText=this.el[this.prop],this._write=this.writeObject):this._write=this.writeString}var n=e(1).Writable,i=e(4),o=e(10);i.inherits(r,n),r.prototype.writeString=function(n,t,e){this.el[this.prop]+=n,e()},r.prototype.writeObject=function(n,t,e){Array.isArray(n.results)&&n.results.forEach(function(e){e.final?(this.finalizedText+=e.alternatives[0].transcript,this.el[this.prop]=this.finalizedText):this.el[this.prop]=this.finalizedText+e.alternatives[0].transcript},this),e()},a.exports=r},function(l,t,e){function r(e){if(e&&!a(e))throw new Error("Unknown encoding: "+e)}function n(e){return e.toString(this.encoding)}function i(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function o(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=e(0).Buffer,a=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1;}},p=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=o;break;default:return void(this.write=n);}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};p.prototype.write=function(a){for(var t,r="";this.charLength;){if(t=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length,a.copy(this.charBuffer,this.charReceived,0,t),this.charReceived+=t,this.charReceived<this.charLength)return"";a=a.slice(t,a.length),r=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var e=r.charCodeAt(r.length-1);if(!(55296<=e&&56319>=e)){if(this.charReceived=this.charLength=0,0===a.length)return r;break}this.charLength+=this.surrogateSize,r=""}this.detectIncompleteChar(a);var n=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,n),n-=this.charReceived),r+=a.toString(this.encoding,0,n);var n=r.length-1,e=r.charCodeAt(n);if(55296<=e&&56319>=e){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),a.copy(this.charBuffer,0,0,s),r.substring(0,n)}return r},p.prototype.detectIncompleteChar=function(n){for(var t,r=3<=n.length?3:n.length;0<r;r--){if(t=n[n.length-r],1==r&&6==t>>5){this.charLength=2;break}if(2>=r&&14==t>>4){this.charLength=3;break}if(3>=r&&30==t>>3){this.charLength=4;break}}this.charReceived=r},p.prototype.end=function(o){var t="";if(o&&o.length&&(t=this.write(o)),this.charReceived){var e=this.charReceived,r=this.charBuffer,n=this.encoding;t+=r.slice(0,e).toString(n)}return t}},function(g,t,e){"use strict";var _=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Array.prototype.slice,i=e(58),o=Object.prototype.propertyIsEnumerable,s=!o.call({toString:null},"toString"),a=o.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(r){var t=r.constructor;return t&&t.prototype===r},l={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!l["$"+e]&&_.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{c(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),h=function(e){if("undefined"==typeof window||!f)return c(e);try{return c(e)}catch(e){return!1}},d=function(d){var c=null!==d&&"object"==typeof d,f="[object Function]"===n.call(d),w=i(d),E=c&&"[object String]"===n.call(d),S=[];if(!c&&!f&&!w)throw new TypeError("Object.keys called on a non-object");if(E&&0<d.length&&!_.call(d,0))for(var l=0;l<d.length;++l)S.push(l+"");if(w&&0<d.length)for(var p=0;p<d.length;++p)S.push(p+"");else for(var y in d)a&&f&&"prototype"===y||!_.call(d,y)||S.push(y+"");if(s)for(var g=h(d),b=0;b<u.length;++b)g&&"constructor"===u[b]||!_.call(d,u[b])||S.push(u[b]);return S};d.shim=function(){if(!Object.keys)Object.keys=d;else if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var n=Object.keys;Object.keys=function(t){return n(i(t)?r.call(t):t)}}return Object.keys||d},g.exports=d},function(o,t,e){"use strict";var a=e(45);o.exports=function(n,l){if(!a(n)&&"function"!=typeof n)return{};var p={};if("string"==typeof l)return l in n&&(p[l]=n[l]),p;for(var r,s=l.length,i=-1;++i<s;)r=l[i],r in n&&(p[r]=n[r]);return p}},function(r,t){var e,n;!function(){"use strict";function i(){this.name="NotSupportedError",this.message="getUserMedia is not implemented in this browser"}function o(){this.then=function(){return this};var r=new i;this.catch=function(t){setTimeout(function(){t(r)})}}function s(n){return a?d?navigator.mediaDevices.getUserMedia(n):new Promise(function(t,e){return u?void u.call(navigator,n,t,e):e(new i)}):new o}i.prototype=Error.prototype;var a="undefined"!=typeof Promise,p="undefined"!=typeof navigator,d=p&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,u=p&&(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);s.NotSupportedError=i,s.isSupported=a&&(d||u),e=[],void 0!==(n=function(){return s}.apply(t,e))&&(r.exports=n)}()},function(a,t,s){"use strict";(function(l,e){function t(o,i){var t=void 0===window.AudioContext?4096:null;i=i||{},t=i.bufferSize||t,n.call(this,i);var r=this,a=!0,s=window.AudioContext||window.webkitAudioContext,p=new s,d=p.createMediaStreamSource(o),u=p.createScriptProcessor(t,1,1);u.onaudioprocess=function(e){a&&r.push(i.objectMode?e.inputBuffer:l.from(e.inputBuffer.getChannelData(0).buffer))},d.connect(u),u.connect(p.destination),this.stop=function(){if("closed"!==p.state){try{o.getTracks()[0].stop()}catch(e){}u.disconnect(),d.disconnect();try{p.close()}catch(e){}a=!1,r.push(null),r.emit("close")}},e.nextTick(function(){r.emit("format",{channels:1,bitDepth:32,sampleRate:p.sampleRate,signed:!0,float:!0})})}var n=s(1).Readable;s(4).inherits(t,n),t.prototype._read=function(){},t.toRaw=function(e){return new Float32Array(e.buffer)},a.exports=t}).call(t,s(0).Buffer,s(3))},function(a,t,e){"use strict";var r=e(60),n=function(){if(!Object.assign)return!1;for(var a="abcdefghijklmnopqrst",t=a.split(""),e={},r=0;r<t.length;++r)e[t[r]]=t[r];var n=Object.assign({},e),i="";for(var o in n)i+=o;return a!==i},s=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}return!1};a.exports=function(){return Object.assign?n()?r:s()?r:Object.assign:r}},function(Y,t,W){"use strict";(function(q){function e(n,t,e){return"function"==typeof n.prependListener?n.prependListener(t,e):void(n._events&&n._events[t]?v(n._events[t])?n._events[t].unshift(e):n._events[t]=[e,n._events[t]]:n.on(t,e))}function r(r,t){S=S||W(5),r=r||{},this.objectMode=!!r.objectMode,t instanceof S&&(this.objectMode=this.objectMode||!!r.readableObjectMode);var e=r.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=e||0===e?e:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new j,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(L||(L=W(22).StringDecoder),this.decoder=new L(r.encoding),this.encoding=r.encoding)}function n(e){return(S=S||W(5),!(this instanceof n))?new n(e):void(this._readableState=new r(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),R.call(this))}function o(a,t,e,r,n){var d=G(t,e);if(d)a.emit("error",d);else if(null===e)t.reading=!1,c(a,t);else if(!(t.objectMode||e&&0<e.length))n||(t.reading=!1);else if(t.ended&&!n){var o=new Error("stream.push() after EOF");a.emit("error",o)}else if(t.endEmitted&&n){var g=new Error("stream.unshift() after end event");a.emit("error",g)}else{var u;!t.decoder||n||r||(e=t.decoder.write(e),u=!t.objectMode&&0===e.length),n||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(a.emit("data",e),a.read(0)):(t.length+=t.objectMode?1:e.length,n?t.buffer.unshift(e):t.buffer.push(e),t.needReadable&&l(a))),p(a,t)}return H(t)}function H(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){return e>=U?e=U:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function s(r,t){return 0>=r||0===t.length&&t.ended?0:t.objectMode?1:r===r?(r>t.highWaterMark&&(t.highWaterMark=a(r)),r<=t.length?r:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function G(n,t){var o=null;return A.isBuffer(t)||"string"==typeof t||null===t||void 0===t||n.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o}function c(n,t){if(!t.ended){if(t.decoder){var e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,l(n)}}function l(r){var t=r._readableState;t.needReadable=!1,t.emittedReadable||(B("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?T(i,r):i(r))}function i(e){B("emit readable"),e.emit("readable"),g(e)}function p(r,t){t.readingMore||(t.readingMore=!0,T(d,r,t))}function d(n,t){for(var e=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(B("maybeReadMore read 0"),n.read(0),e!==t.length);)e=t.length;t.readingMore=!1}function J(r){return function(){var t=r._readableState;B("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&x(r,"data")&&(t.flowing=!0,g(r))}}function t(e){B("readable nexttick read 0"),e.read(0)}function u(r,t){t.resumeScheduled||(t.resumeScheduled=!0,T(f,r,t))}function f(r,t){t.reading||(B("resume read 0"),r.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,r.emit("resume"),g(r),t.flowing&&!t.reading&&r.read(0)}function g(r){var t=r._readableState;for(B("flow",t.flowing);t.flowing&&null!==r.read(););}function h(n,o){if(0===o.length)return null;var e;return o.objectMode?e=o.buffer.shift():!n||n>=o.length?(e=o.decoder?o.buffer.join(""):1===o.buffer.length?o.buffer.head.data:o.buffer.concat(o.length),o.buffer.clear()):e=y(n,o.buffer,o.decoder),e}function y(o,t,e){var r;return o<t.head.data.length?(r=t.head.data.slice(0,o),t.head.data=t.head.data.slice(o)):r=o===t.head.data.length?t.shift():e?b(o,t):m(o,t),r}function b(a,t){var e=t.head,r=1,n=e.data;for(a-=n.length;e=e.next;){var i=e.data,o=a>i.length?i.length:a;if(n+=o===i.length?i:i.slice(0,a),0===(a-=o)){o===i.length?(++r,t.head=e.next?e.next:t.tail=null):(t.head=e,e.data=i.slice(o));break}++r}return t.length-=r,n}function m(a,t){var e=k.allocUnsafe(a),r=t.head,n=1;for(r.data.copy(e),a-=r.data.length;r=r.next;){var i=r.data,o=a>i.length?i.length:a;if(i.copy(e,e.length-a,0,o),0===(a-=o)){o===i.length?(++n,t.head=r.next?r.next:t.tail=null):(t.head=r,r.data=i.slice(o));break}++n}return t.length-=n,e}function _(r){var t=r._readableState;if(0<t.length)throw new Error("\"endReadable()\" called on non-empty stream");t.endEmitted||(t.ended=!0,T(w,t,r))}function w(r,t){r.endEmitted||0!==r.length||(r.endEmitted=!0,t.readable=!1,t.emit("end"))}function E(o,t){for(var e=0,r=o.length;e<r;e++)if(o[e]===t)return e;return-1}Y.exports=n;var S,T=W(14),v=W(13);n.ReadableState=r;var x=(W(15).EventEmitter,function(r,t){return r.listeners(t).length}),R=W(30),A=W(0).Buffer,k=W(12),O=W(8);O.inherits=W(2);var B,P=W(80);B=P&&P.debuglog?P.debuglog("stream"):function(){};var L,j=W(63);O.inherits(n,R);var M=["error","close","destroy","pause","resume"];n.prototype.push=function(n,a){var e=this._readableState;return e.objectMode||"string"!=typeof n||(a=a||e.defaultEncoding)!==e.encoding&&(n=k.from(n,a),a=""),o(this,e,n,a,!1)},n.prototype.unshift=function(e){return o(this,this._readableState,e,"",!0)},n.prototype.isPaused=function(){return!1===this._readableState.flowing},n.prototype.setEncoding=function(e){return L||(L=W(22).StringDecoder),this._readableState.decoder=new L(e),this._readableState.encoding=e,this};var U=8388608;n.prototype.read=function(o){B("read",o),o=parseInt(o,10);var t=this._readableState,e=o;if(0!==o&&(t.emittedReadable=!1),0===o&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return B("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?_(this):l(this),null;if(0===(o=s(o,t))&&t.ended)return 0===t.length&&_(this),null;var r=t.needReadable;B("need readable",r),(0===t.length||t.length-o<t.highWaterMark)&&(r=!0,B("length less than watermark",r)),t.ended||t.reading?(r=!1,B("reading or ended",r)):r&&(B("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(o=s(e,t)));var n;return n=0<o?h(o,t):null,null===n?(t.needReadable=!0,o=0):t.length-=o,0===t.length&&(t.ended||(t.needReadable=!0),e!==o&&t.ended&&_(this)),null!==n&&this.emit("data",n),n},n.prototype._read=function(){this.emit("error",new Error("_read() is not implemented"))},n.prototype.pipe=function(n,t){function g(e){B("onunpipe"),e===l&&o()}function i(){B("onend"),n.end()}function o(){B("cleanup"),n.removeListener("close",u),n.removeListener("finish",f),n.removeListener("drain",y),n.removeListener("error",a),n.removeListener("unpipe",g),l.removeListener("end",i),l.removeListener("end",o),l.removeListener("data",s),b=!0,h.awaitDrain&&(!n._writableState||n._writableState.needDrain)&&y()}function s(t){B("ondata"),_=!1,!1!==n.write(t)||_||((1===h.pipesCount&&h.pipes===n||1<h.pipesCount&&-1!==E(h.pipes,n))&&!b&&(B("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,_=!0),l.pause())}function a(t){B("onerror",t),c(),n.removeListener("error",a),0===x(n,"error")&&n.emit("error",t)}function u(){n.removeListener("finish",f),c()}function f(){B("onfinish"),n.removeListener("close",u),c()}function c(){B("unpipe"),l.unpipe(n)}var l=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=n;break;case 1:h.pipes=[h.pipes,n];break;default:h.pipes.push(n);}h.pipesCount+=1,B("pipe count=%d opts=%j",h.pipesCount,t);var p=(!t||!1!==t.end)&&n!==q.stdout&&n!==q.stderr,d=p?i:o;h.endEmitted?T(d):l.once("end",d),n.on("unpipe",g);var y=J(l);n.on("drain",y);var b=!1,_=!1;return l.on("data",s),e(n,"error",a),n.once("close",u),n.once("finish",f),n.emit("pipe",l),h.flowing||(B("pipe resume"),l.resume()),n},n.prototype.unpipe=function(a){var s=this._readableState;if(0===s.pipesCount)return this;if(1===s.pipesCount)return a&&a!==s.pipes?this:(a||(a=s.pipes),s.pipes=null,s.pipesCount=0,s.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var e=s.pipes,r=s.pipesCount;s.pipes=null,s.pipesCount=0,s.flowing=!1;for(var n=0;n<r;n++)e[n].emit("unpipe",this);return this}var i=E(s.pipes,a);return-1===i?this:(s.pipes.splice(i,1),s.pipesCount-=1,1===s.pipesCount&&(s.pipes=s.pipes[0]),a.emit("unpipe",this),this)},n.prototype.on=function(o,a){var e=R.prototype.on.call(this,o,a);if("data"===o)!1!==this._readableState.flowing&&this.resume();else if("readable"===o){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&l(this):T(t,this))}return e},n.prototype.addListener=n.prototype.on,n.prototype.resume=function(){var e=this._readableState;return e.flowing||(B("resume"),e.flowing=!0,u(this,e)),this},n.prototype.pause=function(){return B("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(B("pause"),this._readableState.flowing=!1,this.emit("pause")),this},n.prototype.wrap=function(a){var s=this._readableState,t=!1,e=this;for(var r in a.on("end",function(){if(B("wrapped end"),s.decoder&&!s.ended){var r=s.decoder.end();r&&r.length&&e.push(r)}e.push(null)}),a.on("data",function(r){(B("wrapped data"),s.decoder&&(r=s.decoder.write(r)),(!s.objectMode||null!==r&&void 0!==r)&&(s.objectMode||r&&r.length))&&(e.push(r)||(t=!0,a.pause()))}),a)void 0===this[r]&&"function"==typeof a[r]&&(this[r]=function(t){return function(){return a[t].apply(a,arguments)}}(r));for(var n=0;n<M.length;n++)a.on(M[n],e.emit.bind(e,M[n]));return e._read=function(r){B("wrapped _read",r),t&&(t=!1,a.resume())},e},n._fromList=h}).call(t,W(3))},function(l,t,e){"use strict";function r(o){this.afterTransform=function(t,e){return n(o,t,e)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function n(a,t,e){var r=a._transformState;r.transforming=!1;var n=r.writecb;if(!n)return a.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==e&&void 0!==e&&a.push(e),n(t);var s=a._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&a._read(s.highWaterMark)}function i(n){if(!(this instanceof i))return new i(n);s.call(this,n),this._transformState=new r(this);var a=this;this._readableState.needReadable=!0,this._readableState.sync=!1,n&&("function"==typeof n.transform&&(this._transform=n.transform),"function"==typeof n.flush&&(this._flush=n.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,t){o(a,e,t)}):o(a)})}function o(o,t,e){if(t)return o.emit("error",t);null!==e&&void 0!==e&&o.push(e);var r=o._writableState,n=o._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return o.push(null)}l.exports=i;var s=e(5),a=e(8);a.inherits=e(2),a.inherits(i,s),i.prototype.push=function(r,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,r,t)},i.prototype._transform=function(){throw new Error("_transform() is not implemented")},i.prototype._write=function(o,t,e){var r=this._transformState;if(r.writecb=e,r.writechunk=o,r.writeencoding=t,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},i.prototype._read=function(){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(n,t,e){n.exports=e(15).EventEmitter},function(e){"use strict";var r={fLaC:"audio/flac",RIFF:"audio/wav",OggS:"audio/ogg; codecs=opus"};e.exports=function(e){return r[e]}},function(s,t,e){"use strict";function r(r){var t=this.audio=new Audio;t.src=r,t.play(),this.stop=function(){t.pause(),t.currentTime=0}}function l(o,t){var a=this.audio=new Audio;if(!a.canPlayType(t)){var r=new Error("Current browser is unable to play back "+t);throw r.name=l.ERROR_UNSUPPORTED_FORMAT,r.contentType=t,r}a.src=URL.createObjectURL(new Blob([o],{type:t})),a.play(),this.stop=function(){a.pause(),a.currentTime=0}}function n(a){return new Promise(function(s,e){var t=new Blob([a]).slice(0,4),r=new FileReader;r.readAsText(t),r.onload=function(){var o=i(r.result);if(o)s(o);else{var t=new Error("Unable to determine content type from file header; only wav, flac, and ogg/opus are supported.");t.name=l.ERROR_UNSUPPORTED_FORMAT,e(t)}}})}var i=e(31);l.ERROR_UNSUPPORTED_FORMAT="UNSUPPORTED_FORMAT",s.exports=l,s.exports.getContentType=n,s.exports.playFile=function(o){return"string"==typeof o?Promise.resolve(new r(o)):n(o).then(function(t){return new l(o,t)})}},function(e){"use strict";e.exports=function(e){return e.results.some(function(r){var t=r.alternatives&&r.alternatives[0];return t&&(t.transcript.trim()&&!t.timestamps||!t.timestamps.length)})},e.exports.ERROR_NO_TIMESTAMPS="NO_TIMESTAMPS"},function(l,t,p){"use strict";(function(d){function r(o){this.options=n(o,{emitAt:r.END,delay:0,allowHalfOpen:!0,writableObjectMode:!0}),e.call(this,o),this.startTime=Date.now(),this.stopped=!1,this.timeout=null}var e=p(1).Transform,t=p(4),n=p(10),c=p(33);t.inherits(r,e),r.START=1,r.END=2,r.prototype._transform=function(e,t,r){if(e instanceof d)return r(new Error("TimingStream requires the source to be in objectMode"));if(Array.isArray(e.results)&&e.results.length&&c(e)){var n=new Error("TimingStream requires timestamps");return n.name=c.ERROR_NO_TIMESTAMPS,r(n)}if(!this.stopped){var a=this.getDelayMs(e),o=this.options.objectMode||this.options.readableObjectMode,i=Array.isArray(e.results&&e.results.length);if(!o&&i&&(e=e.results[0].alternatives[0].transcript),!o&&!i)return r();this.timeout=setTimeout(function(){r(null,e)},a)}},r.prototype.getMessageTime=function(n){if(this.options.emitAt===r.START){if(Array.isArray(n.results)&&n.results.length)return n.results[n.results.length-1].alternatives[0].timestamps[0][r.START];if(Array.isArray(n.speaker_labels)&&n.speaker_labels.length)return n.speaker_labels[0].from}else{if(Array.isArray(n.results)&&n.results.length){var t=n.results[n.results.length-1].alternatives[0].timestamps;return t[t.length-1][r.END]}if(Array.isArray(n.speaker_labels)&&n.speaker_labels.length)return n.speaker_labels[n.speaker_labels.length-1].to}return 0},r.prototype.getDelayMs=function(o){var t=this.getMessageTime(o),e=this.startTime+1e3*t,r=e-Date.now();return s(0,r)},r.prototype.setStartTime=function(e){this.startTime=e||Date.now()},r.prototype.promise=p(9),r.prototype.stop=function(){this.stopped=!0,clearTimeout(this.timeout),this.emit("stop")},l.exports=r}).call(t,p(0).Buffer)},function(l,t,p){"use strict";(function(r,d){function e(e){e=this.options=o(e,{sourceSampleRate:48e3,downsample:!0}),n.call(this,e),this.bufferUnusedSamples=[],e.objectMode||e.writableObjectMode?this._transform=this.handleFirstAudioBuffer:(this._transform=this.transformBuffer,r.nextTick(this.emitFormat.bind(this)))}var n=p(1).Transform,t=p(4),o=p(10);t.inherits(e,n),e.prototype.emitFormat=function(){this.emit("format",{channels:1,bitDepth:16,sampleRate:this.options.downsample?16e3:this.options.sourceSampleRate,signed:!0,float:!1})},e.prototype.downsample=function(d){var t,e,r=null,n=d.length,i=this.bufferUnusedSamples.length;if(0<i){for(r=new Float32Array(i+n),t=0;t<i;++t)r[t]=this.bufferUnusedSamples[t];for(t=0;t<n;++t)r[i+t]=d[t]}else r=d;var o=[-0.037935,-0.00089024,0.040173,0.019989,0.0047792,-0.058675,-0.056487,-0.0040653,0.14527,0.26927,0.33913,0.26927,0.14527,-0.0040653,-0.056487,-0.058675,0.0047792,0.019989,0.040173,-0.00089024,-0.037935],s=this.options.sourceSampleRate/16e3,a=F((r.length-o.length)/s)+1,u=new Float32Array(a);for(t=0;t+o.length-1<r.length;t++){e=z(s*t);for(var f=0,c=0;c<o.length;++c)f+=r[e+c]*o[c];u[t]=f}var l=z(s*t),g=r.length-l;if(0<g)for(this.bufferUnusedSamples=new Float32Array(g),t=0;t<g;++t)this.bufferUnusedSamples[t]=r[l+t];else this.bufferUnusedSamples=new Float32Array(0);return u},e.prototype.floatTo16BitPCM=function(n){for(var t,o=new DataView(new ArrayBuffer(2*n.length)),e=0;e<n.length;e++)t=0>n[e]?32768:32767,o.setInt16(2*e,0|n[e]*t,!0);return d.from(o.buffer)},e.prototype.handleFirstAudioBuffer=function(n,t,e){this.options.sourceSampleRate=n.sampleRate,this.emitFormat(),this._transform=this.transformAudioBuffer,this._transform(n,t,e)},e.prototype.transformAudioBuffer=function(o,t,e){var r=o.getChannelData(0);this.options.downsample&&(r=this.downsample(r)),this.push(this.floatTo16BitPCM(r)),e()},e.prototype.transformBuffer=function(o,t,e){var r=new Float32Array(o.buffer);this.options.downsample&&(r=this.downsample(r)),this.push(this.floatTo16BitPCM(r)),e()},l.exports=e}).call(t,p(3),p(0).Buffer)},function(r,t){"use strict";t.stringify=function(r){return Object.keys(r).map(function(t){return t+"="+("watson-token"===t?r[t]:encodeURIComponent(r[t]))}).join("&")}},function(n,t,o){"use strict";(function(t){n.exports={recognizeMicrophone:o(77),recognizeFile:o(76),getModels:o(75),WebAudioL16Stream:o(35),RecognizeStream:o(18),FilePlayer:o(32),FormatStream:o(17),TimingStream:o(34),ResultStream:o(19),SpeakerStream:o(20),WritableElementStream:o(21),getUserMedia:o(25),MicrophoneStream:o(26),Buffer:t}}).call(t,o(0).Buffer)},function(n,t,e){"use strict";t.synthesize=e(79),t.getVoices=e(78)},function(n,o,e){(function(p){var e=function(){"use strict";function e(s,g,r,i){function o(n,s){if(null===n)return null;if(0==s)return n;var c,l;if("object"!=typeof n)return n;if(e.__isArray(n))c=[];else if(e.__isRegExp(n))c=new RegExp(n.source,t(n)),n.lastIndex&&(c.lastIndex=n.lastIndex);else if(e.__isDate(n))c=new Date(n.getTime());else{if(u&&p.isBuffer(n))return c=new p(n.length),n.copy(c),c;void 0===i?(l=Object.getPrototypeOf(n),c=Object.create(l)):(c=Object.create(i),l=i)}if(g){var f=a.indexOf(n);if(-1!=f)return d[f];a.push(n),d.push(c)}for(var h in n){var b;l&&(b=Object.getOwnPropertyDescriptor(l,h)),b&&null==b.set||(c[h]=o(n[h],s-1))}return c}"object"==typeof g&&(r=g.depth,i=g.prototype,g.filter,g=g.circular);var a=[],d=[],u=void 0!==p;return void 0===g&&(g=!0),void 0===r&&(r=1/0),o(s,r)}function n(e){return Object.prototype.toString.call(e)}function t(r){var t="";return r.global&&(t+="g"),r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),t}return e.clonePrototype=function(r){if(null===r)return null;var t=function(){};return t.prototype=r,new t},e.__objToStr=n,e.__isDate=function(e){return"object"==typeof e&&"[object Date]"===n(e)},e.__isArray=function(e){return"object"==typeof e&&"[object Array]"===n(e)},e.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===n(e)},e.__getRegExpFlags=t,e}();"object"==typeof n&&n.exports&&(n.exports=e)}).call(o,e(0).Buffer)},function(n,t,e){"use strict";t.version="v0.33.1",t.SpeechToText=e(37),t.TextToSpeech=e(38)},function(r,t){"use strict";function g(r){var t=r.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===r[t-2]?2:"="===r[t-1]?1:0}function u(e){return a[63&e>>18]+a[63&e>>12]+a[63&e>>6]+a[63&e]}function e(a,t,e){for(var r,n=[],s=t;s<e;s+=3)r=(a[s]<<16)+(a[s+1]<<8)+a[s+2],n.push(u(r));return n.join("")}t.byteLength=function(e){return 3*e.length/4-g(e)},t.toByteArray=function(l){var t,e,r,i,o,s,a=l.length;o=g(l),s=new c(3*a/4-o),r=0<o?a-4:a;var p=0;for(t=0,e=0;t<r;t+=4,e+=3)i=n[l.charCodeAt(t)]<<18|n[l.charCodeAt(t+1)]<<12|n[l.charCodeAt(t+2)]<<6|n[l.charCodeAt(t+3)],s[p++]=255&i>>16,s[p++]=255&i>>8,s[p++]=255&i;return 2===o?(i=n[l.charCodeAt(t)]<<2|n[l.charCodeAt(t+1)]>>4,s[p++]=255&i):1==o&&(i=n[l.charCodeAt(t)]<<10|n[l.charCodeAt(t+1)]<<4|n[l.charCodeAt(t+2)]>>2,s[p++]=255&i>>8,s[p++]=255&i),s},t.fromByteArray=function(l){for(var t,p=l.length,r=p%3,n="",i=[],o=0,s=p-r;o<s;o+=16383)i.push(e(l,o,o+16383>s?s:o+16383));return 1==r?(t=l[p-1],n+=a[t>>2],n+=a[63&t<<4],n+="=="):2==r&&(t=(l[p-2]<<8)+l[p-1],n+=a[t>>10],n+=a[63&t>>4],n+=a[63&t<<2],n+="="),i.push(n),i.join("")};for(var a=[],n=[],c="undefined"==typeof Uint8Array?Array:Uint8Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=o.length;s<i;++s)a[s]=o[s],n[o.charCodeAt(s)]=s;n[45]=62,n[95]=63},function(p,t,d){(function(g){function y(n,o){if(!(this instanceof y))return new y(n,o);"function"==typeof n&&(o=n,n={}),n||(n={});var e=n.encoding,r=!1;e?"u8"!==(e=(e+"").toLowerCase())&&"uint8"!==e||(e="uint8array"):r=!0,a.call(this,{objectMode:!0}),this.encoding=e,this.shouldInferEncoding=r,o&&this.on("finish",function(){o(this.getBody())}),this.body=[]}function e(e){return /Array\]$/.test(Object.prototype.toString.call(e))}function b(r){return"string"==typeof r||e(r)||r&&"function"==typeof r.subarray}function t(e){for(var t,o=[],r=0;r<e.length;r++)t=e[r],"string"==typeof t?o.push(t):g.isBuffer(t)?o.push(t):b(t)?o.push(new g(t)):o.push(new g(t+""));return g.isBuffer(e[0])?(o=g.concat(o),o=o.toString("utf8")):o=o.join(""),o}function r(e){for(var t,o=[],r=0;r<e.length;r++)t=e[r],g.isBuffer(t)?o.push(t):b(t)?o.push(new g(t)):o.push(new g(t+""));return g.concat(o)}function n(n){for(var t=[],e=0;e<n.length;e++)t.push.apply(t,n[e]);return t}function o(e){for(var t=0,r=0;r<e.length;r++)"string"==typeof e[r]&&(e[r]=new g(e[r])),t+=e[r].length;for(var n=new l(t),r=0,i=0;r<e.length;r++)for(var o=e[r],s=0;s<o.length;s++)n[i++]=o[s];return n}var a=d(6).Writable,s=d(2);if("undefined"==typeof Uint8Array)var l=d(49).Uint8Array;else var l=Uint8Array;p.exports=y,s(y,a),y.prototype._write=function(n,t,e){this.body.push(n),e()},y.prototype.inferEncoding=function(e){var t=void 0===e?this.body[0]:e;return g.isBuffer(t)?"buffer":"undefined"!=typeof Uint8Array&&t instanceof Uint8Array?"uint8array":Array.isArray(t)?"array":"string"==typeof t?"string":"[object Object]"===Object.prototype.toString.call(t)?"object":"buffer"},y.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?n(this.body):"string"===this.encoding?t(this.body):"buffer"===this.encoding?r(this.body):"uint8array"===this.encoding?o(this.body):this.body):[]},Array.isArray}).call(t,d(0).Buffer)},function(o,t,e){var r=e(50);o.exports=Function.prototype.bind||r},function(r,t){t.read=function(d,t,e,r,n){var i,o,s=8*n-r-1,a=(1<<s)-1,u=a>>1,f=-7,g=e?n-1:0,l=e?-1:1,h=d[t+g];for(g+=l,i=h&(1<<-f)-1,h>>=-f,f+=s;0<f;i=256*i+d[t+g],g+=l,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=r;0<f;o=256*o+d[t+g],g+=l,f-=8);if(0===i)i=1-u;else{if(i===a)return o?NaN:1/0*(h?-1:1);o+=Y(2,r),i-=u}return(h?-1:1)*o*Y(2,i-r)},t.write=function(g,t,e,r,n,i){var o,b,a,u=8*i-n-1,f=(1<<u)-1,c=f>>1,l=23===n?5.960464477539063e-8-6.617444900424222e-24:0,h=r?0:i-1,p=r?1:-1,d=0>t||0===t&&0>1/t?1:0;for(t=N(t),isNaN(t)||t===1/0?(b=isNaN(t)?1:0,o=f):(o=F(D(t)/C),1>t*(a=Y(2,-o))&&(o--,a*=2),t+=1<=o+c?l/a:l*Y(2,1-c),2<=t*a&&(o++,a/=2),o+c>=f?(b=0,o=f):1<=o+c?(b=(t*a-1)*Y(2,n),o+=c):(b=t*Y(2,c-1)*Y(2,n),o=0));8<=n;g[e+h]=255&b,h+=p,b/=256,n-=8);for(o=o<<n|b,u+=n;0<u;g[e+h]=255&o,h+=p,o/=256,u-=8);g[e+h-p]|=128*d}},function(o,t,e){"use strict";var r=e(13);o.exports=function(e){return null!=e&&"object"==typeof e&&!1===r(e)}},function(e){function b(o,t){for(var e=-1,a=o?o.length:0,n=Array(a);++e<a;)n[e]=t(o[e],e,o);return n}function p(a,t,e,r){for(var s=a.length,i=e+(r?1:-1);r?i--:++i<s;)if(t(a[i],i,a))return i;return-1}function r(a,t,e){if(t!==t)return p(a,n,e);for(var r=e-1,s=a.length;++r<s;)if(a[r]===t)return r;return-1}function i(a,t,e,r){for(var n=e-1,s=a.length;++n<s;)if(r(a[n],t))return n;return-1}function n(e){return e!==e}function o(r){return function(t){return r(t)}}function a(a,t,e,n){var s=n?i:r,f=-1,c=t.length,h=a;for(a===t&&(t=m(t)),e&&(h=b(a,o(e)));++f<c;)for(var p=0,d=t[f],y=e?e(d):d;-1<(p=s(h,y,p,n));)h!==a&&l.call(h,p,1),l.call(a,p,1);return a}function m(o,t){var e=-1,r=o.length;for(t||(t=Array(r));++e<r;)t[e]=o[e];return t}var t=Array.prototype,l=t.splice;e.exports=function(n,t,e){return n&&n.length&&t&&t.length?a(n,t,void 0,e):n}},function(n,t,e){var r=e(51),a=e(54),o=e(55);n.exports=function(n,t){return a(t).then(function(t){return r(n,t).then(function(e){return o(e)})})}},function(l,t,p){"use strict";(function(t,e){function r(n,o){if(!(this instanceof r))return new r(n,o);if(o=o||{},o.objectMode=!1,s.call(this,o),!n)throw Error("Missing argument \"blob\"");if("function"!=typeof n.slice)throw Error("Given argument \"blob\" is not really a Blob/File or your environment does not support .slice()");if(!d)throw Error("Your environment does not support FileReader");if(!i)throw Error("Your environment does not support Uint8Array");this.totalSize=n.size,this._blob=n,this._nextByteStart=0}function n(r){if(!("function"==typeof e._augment))r=new e(r);else if(!((r=e._augment(r))instanceof i))throw Error("Assertion error, buf should be an Uint8Array");return r}function o(r){if(r=new i(r),"function"==typeof e._augment&&(r=e._augment(r)),!(r instanceof i))throw Error("Assertion error, buf should be an Uint8Array");return r}var s=p(1).Readable,a=p(2),d=t.FileReader,i=t.Uint8Array;l.exports=r,a(r,s),r.prototype.read=function(){var n=r.super_.prototype.read.apply(this,arguments);return!e.isBuffer(n)||n instanceof i||(n=o(n)),n},r.prototype._read=function(o){var t,e,r=this._blob.size;if(t=this._nextByteStart,e=W(t+o,r),this._nextByteStart=e,t>=this._blob.size)return void this.push(null);var a=this._blob.slice(t,e),l=new d;l.onload=function(){var e=new i(l.result);e=n(e),this.push(e)}.bind(this),l.onerror=function(){this.emit("error",l.error)}.bind(this),l.readAsArrayBuffer(a)}}).call(t,p(7),p(0).Buffer)},function(q,H){function G(n){if(j&&w){var t,e=j(n);for(t=0;t<e.length;t+=1)w(n,e[t],{value:n[e[t]],writable:!1,enumerable:!1,configurable:!1})}}function r(n){if(w){if(n.length>T)throw new RangeError("Array too large for polyfill");var t;for(t=0;t<n.length;t+=1)!function(t){w(n,t,{get:function(){return n._getter(t)},set:function(e){n._setter(t,e)},enumerable:!0,configurable:!1})}(t)}}function e(n,t){var e=32-t;return n<<e>>e}function n(n,t){var e=32-t;return n<<e>>>e}function J(e){return[255&e]}function s(r){return e(r[0],8)}function a(e){return[255&e]}function u(e){return n(e[0],8)}function f(e){return e=L(+e),[0>e?0:255<e?255:255&e]}function c(e){return[255&e>>8,255&e]}function l(r){return e(r[0]<<8|r[1],16)}function h(e){return[255&e>>8,255&e]}function p(e){return n(e[0]<<8|e[1],16)}function d(e){return[255&e>>24,255&e>>16,255&e>>8,255&e]}function y(r){return e(r[0]<<24|r[1]<<16|r[2]<<8|r[3],32)}function g(e){return[255&e>>24,255&e>>16,255&e>>8,255&e]}function b(e){return n(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function o(p,t,e){function r(n){var t=k(n),e=n-t;return .5>e?t:.5<e?t+1:t%2?t+1:t}var n,i,o,s,a,d,u,c=(1<<t-1)-1;for(p===p?p===1/0||p===-1/0?(i=(1<<t)-1,o=0,n=0>p?1:0):0===p?(i=0,o=0,n=1/p==-1/0?1:0):(n=0>p,p=A(p),p>=P(2,1-c)?(i=B(k(O(p)/x),1023),o=r(p/P(2,i)*P(2,e)),2<=o/P(2,e)&&(i+=1,o=1),i>c?(i=(1<<t)-1,o=0):(i+=c,o-=P(2,e))):(i=0,o=r(p/P(2,1-c-e)))):(i=(1<<t)-1,o=P(2,e-1),n=0),a=[],s=e;s;s-=1)a.push(o%2?1:0),o=k(o/2);for(s=t;s;s-=1)a.push(i%2?1:0),i=k(i/2);for(a.push(n?1:0),a.reverse(),d=a.join(""),u=[];d.length;)u.push(parseInt(d.substring(0,8),2)),d=d.substring(8);return u}function i(p,t,e){var r,n,i,o,s,a,d,u,c=[];for(r=p.length;r;r-=1)for(i=p[r-1],n=8;n;n-=1)c.push(i%2?1:0),i>>=1;return c.reverse(),o=c.join(""),s=(1<<t-1)-1,a=parseInt(o.substring(0,1),2)?-1:1,d=parseInt(o.substring(1,1+t),2),u=parseInt(o.substring(1+t),2),d===(1<<t)-1?0===u?a*(1/0):NaN:0<d?a*P(2,d-s)*(1+u/P(2,e)):0===u?0>a?-0:0:a*P(2,-(s-1))*(u/P(2,e))}function m(e){return i(e,11,52)}function _(e){return o(e,11,52)}function E(e){return i(e,8,23)}function S(e){return o(e,8,23)}var w,v,T=1e5,R=function(){var r=Object.prototype.toString,n=Object.prototype.hasOwnProperty;return{Class:function(t){return r.call(t).replace(/^\[object *|\]$/g,"")},HasProperty:function(r,t){return t in r},HasOwnProperty:function(e,t){return n.call(e,t)},IsCallable:function(e){return"function"==typeof e},ToInt32:function(e){return e>>0},ToUint32:function(e){return e>>>0}}}(),x=C,A=N,k=F,O=D,B=W,P=Y,L=z;w=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()?Object.defineProperty:function(n,o,e){if(!n===Object(n))throw new TypeError("Object.defineProperty called on non-object");return R.HasProperty(e,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(n,o,e.get),R.HasProperty(e,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(n,o,e.set),R.HasProperty(e,"value")&&(n[o]=e.value),n};var j=Object.getOwnPropertyNames||function(n){if(n!==Object(n))throw new TypeError("Object.getOwnPropertyNames called on non-object");var t,e=[];for(t in n)R.HasOwnProperty(n,t)&&e.push(t);return e};!function(){function e(o,l,e){var p;return p=function(a,t,e){var o,s,i,l;if(!(arguments.length&&"number"!=typeof arguments[0])){if(this.length=R.ToInt32(arguments[0]),0>e)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new n(this.byteLength),this.byteOffset=0}else if("object"==typeof arguments[0]&&arguments[0].constructor===p)for(o=arguments[0],this.length=o.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new n(this.byteLength),this.byteOffset=0,i=0;i<this.length;i+=1)this._setter(i,o._getter(i));else if("object"!=typeof arguments[0]||arguments[0]instanceof n||"ArrayBuffer"===R.Class(arguments[0])){if("object"!=typeof arguments[0]||!(arguments[0]instanceof n||"ArrayBuffer"===R.Class(arguments[0])))throw new TypeError("Unexpected argument type(s)");if(this.buffer=a,this.byteOffset=R.ToUint32(t),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(3>arguments.length){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=R.ToUint32(e),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else for(s=arguments[0],this.length=R.ToUint32(s.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new n(this.byteLength),this.byteOffset=0,i=0;i<this.length;i+=1)l=s[i],this._setter(i,+l);this.constructor=p,G(this),r(this)},p.prototype=new i,p.prototype.BYTES_PER_ELEMENT=o,p.prototype._pack=l,p.prototype._unpack=e,p.BYTES_PER_ELEMENT=o,p.prototype._getter=function(o){if(1>arguments.length)throw new SyntaxError("Not enough arguments");if((o=R.ToUint32(o))>=this.length)return v;var t,e,r=[];for(t=0,e=this.byteOffset+o*this.BYTES_PER_ELEMENT;t<this.BYTES_PER_ELEMENT;t+=1,e+=1)r.push(this.buffer._bytes[e]);return this._unpack(r)},p.prototype.get=p.prototype._getter,p.prototype._setter=function(o,t){if(2>arguments.length)throw new SyntaxError("Not enough arguments");if((o=R.ToUint32(o))>=this.length)return v;var e,r,n=this._pack(t);for(e=0,r=this.byteOffset+o*this.BYTES_PER_ELEMENT;e<this.BYTES_PER_ELEMENT;e+=1,r+=1)this.buffer._bytes[r]=n[e]},p.prototype.set=function(){if(1>arguments.length)throw new SyntaxError("Not enough arguments");var e,t,r,n,o,s,i,p,d,u;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(e=arguments[0],(r=R.ToUint32(arguments[1]))+e.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(p=this.byteOffset+r*this.BYTES_PER_ELEMENT,d=e.length*this.BYTES_PER_ELEMENT,e.buffer===this.buffer){for(u=[],o=0,s=e.byteOffset;o<d;o+=1,s+=1)u[o]=e.buffer._bytes[s];for(o=0,i=p;o<d;o+=1,i+=1)this.buffer._bytes[i]=u[o]}else for(o=0,s=e.byteOffset,i=p;o<d;o+=1,s+=1,i+=1)this.buffer._bytes[i]=e.buffer._bytes[s]}else{if("object"!=typeof arguments[0]||void 0===arguments[0].length)throw new TypeError("Unexpected argument type(s)");if(t=arguments[0],n=R.ToUint32(t.length),(r=R.ToUint32(arguments[1]))+n>this.length)throw new RangeError("Offset plus length of array is out of range");for(o=0;o<n;o+=1)s=t[o],this._setter(r+o,+s)}},p.prototype.subarray=function(o,t){function e(n,t,e){return n<t?t:n>e?e:n}o=R.ToInt32(o),t=R.ToInt32(t),1>arguments.length&&(o=0),2>arguments.length&&(t=this.length),0>o&&(o=this.length+o),0>t&&(t=this.length+t),o=e(o,0,this.length),t=e(t,0,this.length);var r=t-o;return 0>r&&(r=0),new this.constructor(this.buffer,this.byteOffset+o*this.BYTES_PER_ELEMENT,r)},p}var n=function(r){if(0>(r=R.ToInt32(r)))throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=r,this._bytes=[],this._bytes.length=r;var t;for(t=0;t<this.byteLength;t+=1)this._bytes[t]=0;G(this)};H.ArrayBuffer=H.ArrayBuffer||n;var i=function(){},t=e(1,J,s),o=e(1,a,u),w=e(1,f,u),T=e(2,c,l),x=e(2,h,p),A=e(4,d,y),k=e(4,g,b),O=e(4,S,E),B=e(8,_,m);H.Int8Array=H.Int8Array||t,H.Uint8Array=H.Uint8Array||o,H.Uint8ClampedArray=H.Uint8ClampedArray||w,H.Int16Array=H.Int16Array||T,H.Uint16Array=H.Uint16Array||x,H.Int32Array=H.Int32Array||A,H.Uint32Array=H.Uint32Array||k,H.Float32Array=H.Float32Array||O,H.Float64Array=H.Float64Array||B}(),function(){function e(r,n){return R.IsCallable(r.get)?r.get(n):r[n]}function t(t){return function(r,n){if((r=R.ToUint32(r))+t.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");r+=this.byteOffset;var l,s=new H.Uint8Array(this.buffer,r,t.BYTES_PER_ELEMENT),a=[];for(l=0;l<t.BYTES_PER_ELEMENT;l+=1)a.push(e(s,l));return!!n===!!p&&a.reverse(),e(new t(new H.Uint8Array(a).buffer),0)}}function r(t){return function(r,n,i){if((r=R.ToUint32(r))+t.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var d,a,u=new t([n]),f=new H.Uint8Array(u.buffer),c=[];for(d=0;d<t.BYTES_PER_ELEMENT;d+=1)c.push(e(f,d));!!i===!!p&&c.reverse(),a=new H.Uint8Array(this.buffer,r,t.BYTES_PER_ELEMENT),a.set(c)}}var p=function(){var t=new H.Uint16Array([4660]);return 18===e(new H.Uint8Array(t.buffer),0)}(),n=function(e,t,r){if(0===arguments.length)e=new H.ArrayBuffer(0);else if(!(e instanceof H.ArrayBuffer||"ArrayBuffer"===R.Class(e)))throw new TypeError("TypeError");if(this.buffer=e||new H.ArrayBuffer(0),this.byteOffset=R.ToUint32(t),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteLength=3>arguments.length?this.buffer.byteLength-this.byteOffset:R.ToUint32(r),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");G(this)};n.prototype.getUint8=t(H.Uint8Array),n.prototype.getInt8=t(H.Int8Array),n.prototype.getUint16=t(H.Uint16Array),n.prototype.getInt16=t(H.Int16Array),n.prototype.getUint32=t(H.Uint32Array),n.prototype.getInt32=t(H.Int32Array),n.prototype.getFloat32=t(H.Float32Array),n.prototype.getFloat64=t(H.Float64Array),n.prototype.setUint8=r(H.Uint8Array),n.prototype.setInt8=r(H.Int8Array),n.prototype.setUint16=r(H.Uint16Array),n.prototype.setInt16=r(H.Int16Array),n.prototype.setUint32=r(H.Uint32Array),n.prototype.setInt32=r(H.Int32Array),n.prototype.setFloat32=r(H.Float32Array),n.prototype.setFloat64=r(H.Float64Array),H.DataView=H.DataView||n}()},function(e){var l=Array.prototype.slice,r=Object.prototype.toString;e.exports=function(p){var t=this;if("function"!=typeof t||"[object Function]"!==r.call(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var d,i=l.call(arguments,1),n=function(){if(this instanceof d){var e=t.apply(this,i.concat(l.call(arguments)));return Object(e)===e?e:this}return t.apply(p,i.concat(l.call(arguments)))},o=s(0,t.length-i.length),a=[],u=0;u<o;u++)a.push("$"+u);if(d=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(n),t.prototype){var f=function(){};f.prototype=t.prototype,d.prototype=new f,f.prototype=null}return d}},function(n,t,e){e(74),n.exports=self.fetch.bind(self)},function(o,t,e){function r(r,t){this._id=r,this._clearFn=t}var n=Function.prototype.apply;t.setTimeout=function(){return new r(n.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(n.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(r,t){clearTimeout(r._idleTimeoutId),r._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(r){clearTimeout(r._idleTimeoutId);var t=r._idleTimeout;0<=t&&(r._idleTimeoutId=setTimeout(function(){r._onTimeout&&r._onTimeout()},t))},e(67),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(n,t,e){var o=e(42);n.exports=function(a){return new Promise(function(t,e){var r=o();a.on("error",e),a.on("end",function(){t(r.getBody())}),a.pipe(r)})}},function(n,t,e){var r=e(53);n.exports=function(n){return n=n||{},n.body&&n.body.readable?r(n.body).then(function(t){return n.body=t,n}):Promise.resolve(n)}},function(n,t,e){var r=e(56),a=e(57);n.exports=function(e){return e.readable=e.body&&e.body.getReader?function(){return Promise.resolve(new a(e.body.getReader()))}:function(){return e.body&&e.body.readable?Promise.resolve(e.body):e.bodyUsed?Promise.reject(new Error("body already in use")):e.arrayBuffer().then(function(e){return new r(e)})},e}},function(a,t,s){(function(l){function e(e){var t=this;n.call(this),this._read=function(){t.push(new l(e)),t.push(null)}}var t=s(2),n=s(6);t(e,n),a.exports=e}).call(t,s(0).Buffer)},function(a,t,s){(function(l){function e(e){var o=this;n.call(this),this._read=function(){e.read().then(function(e){e.done?o.push(null):o.push(new l(e.value))}).catch(function(e){o.emit("error",e)})}}var t=s(2),n=s(6);t(e,n),a.exports=e}).call(t,s(0).Buffer)},function(e){"use strict";var o=Object.prototype.toString;e.exports=function(n){var a=o.call(n),e="[object Arguments]"===a;return e||(e="[object Array]"!==a&&null!==n&&"object"==typeof n&&"number"==typeof n.length&&0<=n.length&&"[object Function]"===o.call(n.callee)),e}},function(o,t,e){"use strict";var a=e(23);o.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var n={},t=Symbol("test"),e=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;for(t in n[t]=42,n)return!1;if(0!==a(n).length)return!1;if("function"==typeof Object.keys&&0!==Object.keys(n).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(n).length)return!1;var r=Object.getOwnPropertySymbols(n);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(n,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var s=Object.getOwnPropertyDescriptor(n,t);if(42!==s.value||!0!==s.enumerable)return!1}return!0}},function(l,t,e){"use strict";var m=e(23),r=e(43),n=function(e){return void 0!==e&&null!==e},o=e(59)(),s=Object,a=r.call(Function.call,Array.prototype.push),u=r.call(Function.call,Object.prototype.propertyIsEnumerable),f=o?Object.getOwnPropertySymbols:null;l.exports=function(e){if(!n(e))throw new TypeError("target must be an object");var t,r,i,l,c,p,d,h=s(e);for(t=1;t<arguments.length;++t){r=s(arguments[t]),l=m(r);var g=o&&(Object.getOwnPropertySymbols||f);if(g)for(c=g(r),i=0;i<c.length;++i)d=c[i],u(r,d)&&a(l,d);for(i=0;i<l.length;++i)d=l[i],p=r[d],u(r,d)&&(h[d]=p)}return h}},function(n,t,e){n.exports=e(5)},function(a,t,e){"use strict";function r(e){return this instanceof r?void n.call(this,e):new r(e)}a.exports=r;var n=e(29),s=e(8);s.inherits=e(2),s.inherits(r,n),r.prototype._transform=function(n,t,e){e(null,n)}},function(o,t,e){"use strict";function r(){this.head=null,this.tail=null,this.length=0}var a=(e(0).Buffer,e(12));o.exports=r,r.prototype.push=function(r){var n={data:r,next:null};0<this.length?this.tail.next=n:this.head=n,this.tail=n,++this.length},r.prototype.unshift=function(r){var n={data:r,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length},r.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},r.prototype.clear=function(){this.head=this.tail=null,this.length=0},r.prototype.join=function(n){if(0===this.length)return"";for(var t=this.head,e=""+t.data;t=t.next;)e+=n+t.data;return e},r.prototype.concat=function(o){if(0===this.length)return a.alloc(0);if(1===this.length)return this.head.data;for(var t=a.allocUnsafe(o>>>0),e=this.head,r=0;e;)e.data.copy(t,r),r+=e.data.length,e=e.next;return t}},function(n,t,e){n.exports=e(6).PassThrough},function(n,t,e){n.exports=e(6).Transform},function(n,t,e){n.exports=e(16)},function(n,t,e){(function(r,n){!function(p,t){"use strict";function e(o){"function"!=typeof o&&(o=new Function(""+o));for(var i=Array(arguments.length-1),l=0;l<i.length;l++)i[l]=arguments[l+1];var r={callback:o,args:i};return d[a]=r,s(a),a++}function r(e){delete d[e]}function i(r){var o=r.callback,e=r.args;switch(e.length){case 0:o();break;case 1:o(e[0]);break;case 2:o(e[0],e[1]);break;case 3:o(e[0],e[1],e[2]);break;default:o.apply(t,e);}}function o(n){if(u)setTimeout(o,0,n);else{var t=d[n];if(t){u=!0;try{i(t)}finally{r(n),u=!1}}}}if(!p.setImmediate){var s,a=1,d={},u=!1,c=p.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(p);l=l&&l.setTimeout?l:p,"[object process]"==={}.toString.call(p.process)?function(){s=function(e){n.nextTick(function(){o(e)})}}():function(){if(p.postMessage&&!p.importScripts){var t=!0,e=p.onmessage;return p.onmessage=function(){t=!1},p.postMessage("","*"),p.onmessage=e,t}}()?function(){var t="setImmediate$"+Math.random()+"$",e=function(e){e.source===p&&"string"==typeof e.data&&0===e.data.indexOf(t)&&o(+e.data.slice(t.length))};p.addEventListener?p.addEventListener("message",e,!1):p.attachEvent("onmessage",e),s=function(e){p.postMessage(t+e,"*")}}():p.MessageChannel?function(){var r=new MessageChannel;r.port1.onmessage=function(e){o(e.data)},s=function(t){r.port2.postMessage(t)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var n=c.documentElement;s=function(t){var e=c.createElement("script");e.onreadystatechange=function(){o(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}}():function(){s=function(e){setTimeout(o,0,e)}}(),l.setImmediate=e,l.clearImmediate=r}}("undefined"==typeof self?void 0===r?this:r:self)}).call(t,e(7),e(3))},function(o,t,e){(function(a){function r(e){try{if(!a.localStorage)return!1}catch(e){return!1}var t=a.localStorage[e];return null!=t&&"true"===(t+"").toLowerCase()}o.exports=function(n,t){if(r("noDeprecation"))return n;var e=!1;return function(){if(!e){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),e=!0}return n.apply(this,arguments)}}}).call(t,e(7))},function(e){e.exports="function"==typeof Object.create?function(r,n){r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:function(n,t){n.super_=t;var e=function(){};e.prototype=t.prototype,n.prototype=new e,n.prototype.constructor=n}},function(e){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(n,t,e){var r=function(){return this}(),a=r.WebSocket||r.MozWebSocket,o=e(72);n.exports={w3cwebsocket:a?function(r,t){return t?new a(r,t):new a(r)}:null,version:o}},function(n,t,e){n.exports=e(73).version},function(e){e.exports={_from:"websocket@^1.0.24",_id:"websocket@1.0.24",_inBundle:!1,_integrity:"sha1-dJA+dfJUW2suHeFCW8HJBZF6GJA=",_location:"/websocket",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"websocket@^1.0.24",name:"websocket",escapedName:"websocket",rawSpec:"^1.0.24",saveSpec:null,fetchSpec:"^1.0.24"},_requiredBy:["/","/watson-developer-cloud"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.24.tgz",_shasum:"74903e75f2545b6b2e1de1425bc1c905917a1890",_spec:"websocket@^1.0.24",_where:"/home/travis/build/watson-developer-cloud/speech-javascript-sdk",author:{name:"Brian McKelvey",email:"brian@worlize.com",url:"https://www.worlize.com/"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},bundleDependencies:!1,config:{verbose:!1},contributors:[{name:"I\xF1aki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.6"},deprecated:!1,description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.0.1"},directories:{lib:"./lib"},engines:{node:">=0.8.0"},homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",name:"websocket",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.24"}},function(){!function(S){"use strict";function T(e){if("string"!=typeof e&&(e=e+""),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function e(e){return"string"!=typeof e&&(e=e+""),e}function r(r){var t={next:function(){var t=r.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function n(r){this.map={},r instanceof n?r.forEach(function(r,t){this.append(t,r)},this):Array.isArray(r)?r.forEach(function(e){this.append(e[0],e[1])},this):r&&Object.getOwnPropertyNames(r).forEach(function(t){this.append(t,r[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function o(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function t(n){var t=new FileReader,e=o(t);return t.readAsArrayBuffer(n),e}function s(n){var t=new FileReader,e=o(t);return t.readAsText(n),e}function u(o){for(var t=new Uint8Array(o),e=Array(t.length),r=0;r<t.length;r++)e[r]=a(t[r]);return e.join("")}function f(r){if(r.slice)return r.slice(0);var t=new Uint8Array(r.byteLength);return t.set(new Uint8Array(r)),t.buffer}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(!(this._bodyInit=e,e))this._bodyText="";else if("string"==typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(g.arrayBuffer&&g.blob&&m(e))this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!v(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(e)}this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(t)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(u(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(r){var t=r.toUpperCase();return-1<w.indexOf(t)?t:r}function h(o,t){t=t||{};var e=t.body;if(o instanceof h){if(o.bodyUsed)throw new TypeError("Already read");this.url=o.url,this.credentials=o.credentials,t.headers||(this.headers=new n(o.headers)),this.method=o.method,this.mode=o.mode,e||null==o._bodyInit||(e=o._bodyInit,o.bodyUsed=!0)}else this.url=o+"";if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new n(t.headers)),this.method=l(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&e)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(e)}function p(r){var o=new FormData;return r.trim().split("&").forEach(function(e){if(e){var t=e.split("="),r=t.shift().replace(/\+/g," "),n=t.join("=").replace(/\+/g," ");o.append(decodeURIComponent(r),decodeURIComponent(n))}}),o}function d(r){var t=new n;return r.split(/\r?\n/).forEach(function(e){var o=e.split(":"),r=o.shift().trim();if(r){var n=o.join(":").trim();t.append(r,n)}}),t}function y(r,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=200<=this.status&&300>this.status,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new n(t.headers),this.url=t.url||"",this._initBody(r)}if(!S.fetch){var g={searchParams:"URLSearchParams"in S,iterable:"Symbol"in S&&"iterator"in Symbol,blob:"FileReader"in S&&"Blob"in S&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in S,arrayBuffer:"ArrayBuffer"in S};if(g.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(e){return e&&DataView.prototype.isPrototypeOf(e)},v=ArrayBuffer.isView||function(e){return e&&-1<b.indexOf(Object.prototype.toString.call(e))};n.prototype.append=function(r,t){r=T(r),t=e(t);var n=this.map[r];this.map[r]=n?n+","+t:t},n.prototype.delete=function(e){delete this.map[T(e)]},n.prototype.get=function(e){return e=T(e),this.has(e)?this.map[e]:null},n.prototype.has=function(e){return this.map.hasOwnProperty(T(e))},n.prototype.set=function(r,t){this.map[T(r)]=e(t)},n.prototype.forEach=function(n,t){for(var e in this.map)this.map.hasOwnProperty(e)&&n.call(t,this.map[e],e,this)},n.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),r(n)},n.prototype.values=function(){var n=[];return this.forEach(function(t){n.push(t)}),r(n)},n.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),r(n)},g.iterable&&(n.prototype[Symbol.iterator]=n.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},c.call(h.prototype),c.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];y.redirect=function(r,n){if(-1===_.indexOf(n))throw new RangeError("Invalid status code");return new y(null,{status:n,headers:{location:r}})},S.Headers=n,S.Request=h,S.Response=y,S.fetch=function(a,t){return new Promise(function(s,e){var r=new h(a,t),n=new XMLHttpRequest;n.onload=function(){var r={status:n.status,statusText:n.statusText,headers:d(n.getAllResponseHeaders()||"")};r.url="responseURL"in n?n.responseURL:r.headers.get("X-Request-URL");var t="response"in n?n.response:n.responseText;s(new y(t,r))},n.onerror=function(){e(new TypeError("Network request failed"))},n.ontimeout=function(){e(new TypeError("Network request failed"))},n.open(r.method,r.url,!0),"include"===r.credentials&&(n.withCredentials=!0),"responseType"in n&&g.blob&&(n.responseType="blob"),r.headers.forEach(function(r,t){n.setRequestHeader(t,r)}),n.send(void 0===r._bodyInit?null:r._bodyInit)})},S.fetch.polyfill=!0}}("undefined"==typeof self?this:self)},function(e){"use strict";e.exports=function(e){if(!e||!e.token)throw new Error("Watson SpeechToText: missing required parameter: options.token");return fetch("https://stream.watsonplatform.net/speech-to-text/api/v1/models?watson-token="+e.token,{credentials:"omit",headers:{accept:"application/json"}}).then(function(e){return e.json()}).then(function(e){return e.models})}},function(p,t,e){"use strict";var r=e(48),n=e(18),i=e(32),o=e(17),s=e(34),a=e(27)(),u=e(21),f=e(19),c=e(20),l=e(47);p.exports=function(h){if(!h||!h.token)throw new Error("WatsonSpeechToText: missing required parameter: opts.token");h.data&&!h.file&&(h.file=h.data,delete h.data,h.silent||console.log(new Error("WatsonSpeechToText recognizeFile(): Warning data option was renamed to file. Set silent: true to hide this warning."))),h.outputElement&&!1!==h.objectMode&&(h.objectMode=!0),h.extractResults&&(h.objectMode=!0),h.resultsBySpeaker&&(h.objectMode=!0,h.speaker_labels=!0),h.format=!1!==h.format,void 0===h.smart_formatting&&(h.smart_formatting=h.format);var _=h.realtime||void 0===h.realtime&&h.play;_&&(h.timestamps=!0);var e=a({continuous:!0,interim_results:!0},h),w=new n(e),p=[w],d=w;if("string"==typeof h.file)l(h.file).then(function(e){return e.readable()}).then(function(e){e.pipe(w),p.unshift(e)}).catch(function(e){w.emit("error",e)});else{var y=new r(h.file);y.pipe(w),p.unshift(y)}var g;if(_?(g=new s(h),d=d.pipe(g),p.push(d),d.on("stop",w.stop.bind(w))):d.stop=w.stop.bind(w),h.resultsBySpeaker&&(d=d.pipe(new c(h)),p.push(d)),h.format&&(d=d.pipe(new o(h)),p.push(d)),h.play&&i.playFile(h.file).then(function(t){if(w.on("stop",t.stop.bind(t)),w.on("error",t.stop.bind(t)),g&&"string"==typeof h.file){var e=function(){g.setStartTime(),t.audio.removeEventListener("playing",e)};t.audio.addEventListener("playing",e)}}).catch(function(r){var t=p.filter(function(e){return e._readableState&&e._readableState.pipes&&(e._readableState.pipes===d||Array.isArray(e._readableState.pipes)&&-1!==e._readableState.pipes.indexOf(d))});d.emit("error",r),t.forEach(function(e){e.pipe(d)})}),h.outputElement&&p.push(d.pipe(new u(h))),h.extractResults){var b=d.stop?d.stop.bind(d):w.stop.bind(w);d=d.pipe(new f),d.stop=b,p.push(d)}return p.forEach(function(e){e!==d&&e.on("error",d.emit.bind(d,"error"))}),d.stop||(d.stop=g?g.stop.bind(g):w.stop.bind(w)),d.recognizeStream=w,d}},function(g,t,e){"use strict";var m,n=e(25),i=e(26),o=e(18),s=e(35),a=e(17),u=e(27)(),f=e(21),r=e(1).Writable,c=e(19),h=e(20),p=new r({write:function(n,t,e){e()},objectMode:!0,decodeStrings:!1});g.exports=function(d){if(!d||!d.token)throw new Error("WatsonSpeechToText: missing required parameter: opts.token");d.outputElement&&!1!==d.objectMode&&(d.objectMode=!0),d.extractResults&&(d.objectMode=!0),d.resultsBySpeaker&&(d.objectMode=!0,d.speaker_labels=!0),d.format=!1!==d.format,void 0===d.smart_formatting&&(d.smart_formatting=d.format);var _,e=u({continuous:!0,"content-type":"audio/l16;rate=16000",interim_results:!0},d),w=new o(e),l=[w],y=d.keepMicrophone;y&&m?(m.unpipe(p),_=Promise.resolve(m)):_=(d.mediaStream?Promise.resolve(d.mediaStream):n({video:!1,audio:!0})).then(function(t){var e=new i(t,{objectMode:!0,bufferSize:d.bufferSize});return y&&(m=e),Promise.resolve(e)});var r=w;return d.resultsBySpeaker&&(r=r.pipe(new h(d)),l.push(r)),d.format&&(r=r.pipe(new a(d)),l.push(r)),d.outputElement&&l.push(r.pipe(new f(d))),d.extractResults&&(r=r.pipe(new c),l.push(r)),_.catch(function(e){r.emit("error",e),"NotSupportedError"===e.name&&r.end()}),_.then(function(n){function t(){n.unpipe(e),n.pipe(p),e.end()}l.push(n);var e=new s({writableObjectMode:!0});n.pipe(e).pipe(w),l.push(e),y?(w.on("end",t),w.on("stop",t)):(w.on("end",n.stop.bind(n)),w.on("stop",n.stop.bind(n)))}).catch(w.emit.bind(w,"error")),l.forEach(function(e){e!==r&&e.on("error",r.emit.bind(r,"error"))}),r!==w&&(r.stop=w.stop.bind(w)),r.recognizeStream=w,r},g.exports.isSupported=n.isSupported},function(e){"use strict";e.exports=function(e){if(!e||!e.token)throw new Error("Watson TextToSpeech: missing required parameter: options.token");return fetch("https://stream.watsonplatform.net/text-to-speech/api/v1/voices?watson-token="+e.token,{credentials:"omit",headers:{accept:"application/json"}}).then(function(e){return e.json()}).then(function(e){return e.voices})}},function(a,t,e){"use strict";var r=e(24),n=e(36),s=["voice","X-WDC-PL-OPT-OUT","X-Watson-Learning-Opt-Out","text","watson-token","accept","customization_id"];a.exports=function(o){if(!o||!o.token)throw new Error("Watson TextToSpeech: missing required parameter: options.token");o["watson-token"]=o.token,delete o.token;var a=o.element||new Audio;return a.crossOrigin="anonymous",a.src="https://stream.watsonplatform.net/text-to-speech/api/v1/synthesize?"+n.stringify(r(o,s)),!1!==o.autoPlay&&a.play(),a}},function(){}])}),"use strict",$(function(){function e(){const e=new Date;return e.getFullYear()+"\u5E74"+(e.getMonth()+1)+"\u6708"+e.getDate()+"\u65E5 "+e.getHours()+"\u6642"+e.getMinutes()+"\u5206"+e.getSeconds()+"\u79D2"}function t(e,t){const r=e.split("<%= s %>");let n=0,o=r[0];for(let a=1,s=r.length;a<s;a++)o+=t[n++]+r[a];return o}function r(e){let t="";return 0!==e&&(t="["+parseInt(100*Math.abs(e))+"%]"),t}function n(e){return{message:u[e],confidence:0}}function o(e){const t={text:e,token:b.tts.token,voice:b.tts.voice};WatsonSpeech.TextToSpeech.synthesize(t)}function a(e){const n=e.message,a=r(e.confidence);o(n),f.append(t(p,[n,a])),window.scrollTo(0,document.body.scrollHeight)}function s(e){const t=$("#loading-view");e?!t.length&&$("body").append("<div id=\"loading-view\" />"):t.length&&t.remove()}function i(t,r){s(!0),$.ajax({type:"GET",url:t,data:{text:r,now:e()}}).done(function(e){a(e)}).fail(function(){a(n("error_ajax"))}).always(function(){s(!1)})}function l(e,r){console.log(r+": ",e),e||f.append(t(p,[r+" \u975E\u5BFE\u5FDC",""]))}const p="<div class=\"row\"><div class=\"col-xs-11\"><p class=\"balloon-left\"><%= s %><%= s %></p></div></div>",d={false:"<span class=\"glyphicon glyphicon-record\" aria-hidden=\"true\"></span>",true:"<span class=\"glyphicon glyphicon-stop\" aria-hidden=\"true\"></span>"},u={error_ajax:"\u901A\u4FE1\u30A8\u30E9\u30FC\u3067\u3059\u3002\u7533\u3057\u8A33\u3054\u3056\u3044\u307E\u305B\u3093\u304C\u6700\u521D\u304B\u3089\u3084\u308A\u76F4\u3057\u3066\u304F\u3060\u3055\u3044\u3002",error_watson_auth:"Watson \u30B5\u30FC\u30D3\u30B9\u306E\u8A8D\u8A3C\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002\u7533\u3057\u8A33\u3054\u3056\u3044\u307E\u305B\u3093\u304C\u6700\u521D\u304B\u3089\u3084\u308A\u76F4\u3057\u3066\u304F\u3060\u3055\u3044\u3002"},c=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||null,f=$("#conversationFieldId"),g=$("#qId"),h=$("#sttId"),y=$("#searchFormId");let b={},m=!1,_=null;h.on("click",function(){if(m)_&&_.stop(),g.focus();else{let e={token:b.stt.token,model:"ja-JP_BroadbandModel",outputElement:"#qId"};b.stt.customization_id&&(e.customization_id=b.stt.customization_id),_=WatsonSpeech.SpeechToText.recognizeMicrophone(e),_.on("error",function(e){console.log(e)})}m=!m,h.html(d[m])}),y.on("submit",function(){const e=g.val();return""!==e.replace(/\s/g,"")&&(m&&(_&&_.stop(),m=!1,h.html(d[m])),g.val(""),f.append(t("<div class=\"row\"><div class=\"col-xs-11\"><p class=\"balloon-right\"><%= s %></p></div></div>",[e])),i("ask",e)),g.focus(),!1}),function(){y.hide(),h.hide(),s(!0),l(c,"getUserMedia API"),$.ajax({type:"GET",url:"/use-watson-speech"}).done(function(e){c&&h.show(),b=e,i("ask-classname","general_hello"),y.show()}).fail(function(e){console.log("error: ",e),a(n("error_watson_auth"))})}()});
